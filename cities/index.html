<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faerûn City Generator</title>
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Poppins & IM Fell English SC -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <style>
        /* Custom CSS for advanced styling and overrides */
        :root {
            --bg-color: #1a1a2e;
            --primary-accent: #00e5ff;
            --secondary-accent: #e43f5a;
            --text-color: #e0e0e0;
            --text-muted: #a0a0a0;
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(255, 255, 255, 0.15);
            --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.05'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            color: var(--text-color);
        }
        
        .title-font {
            font-family: 'IM Fell English SC', serif;
            text-shadow: 0 0 10px var(--primary-accent), 0 0 20px var(--primary-accent);
        }
        
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 1rem;
            border: 1px solid var(--card-border);
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
            animation: card-fade-in 0.5s forwards;
        }

        .glass-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5);
            border-color: rgba(0, 229, 255, 0.5);
        }

        @keyframes card-fade-in {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background-color: rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.8s cubic-bezier(0.25, 1, 0.5, 1);
            box-shadow: 0 0 10px currentColor;
        }
        
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
            vertical-align: middle;
            font-size: 1.4em;
            margin-right: 0.5rem;
            color: var(--primary-accent);
        }

        .card-header {
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--card-border);
            padding-bottom: 0.75rem;
            margin-bottom: 1rem;
        }

        .card-header h3 {
            color: white;
            font-weight: 500;
            font-size: 1.25rem;
        }
        
        .district-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-right: 6px;
            margin-bottom: 6px;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .npc-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.5rem;
            font-family: 'IM Fell English SC', serif;
            border: 2px solid rgba(255, 255, 255, 0.5);
            flex-shrink: 0;
        }

        .generate-btn {
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px var(--primary-accent), inset 0 0 10px rgba(0, 229, 255, 0.3);
            border: 1px solid var(--primary-accent);
        }
        .generate-btn:hover {
            box-shadow: 0 0 25px var(--primary-accent), inset 0 0 15px rgba(0, 229, 255, 0.5);
            transform: scale(1.05);
        }
        .generate-btn:disabled {
            cursor: not-allowed;
            background-color: #4a5568;
            border-color: #718096;
            box-shadow: none;
        }

        .spinner {
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <header class="text-center mb-12">
            <h1 class="title-font text-5xl font-bold mb-2 text-white">Faerûn City Generator</h1>
            <p class="text-gray-400 text-lg">Create unique cities for your Dungeons & Dragons campaign</p>
        </header>
        
        <div class="flex justify-center mb-8 gap-4">
            <button id="generateBtn" class="generate-btn bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-full shadow-lg flex items-center gap-2">
                <span class="material-symbols-outlined !text-white !text-2xl !mr-0">auto_awesome</span>
                <span id="generateBtnText">Generate New City</span>
                <span id="spinner" class="spinner hidden"><span class="material-symbols-outlined !text-white !text-2xl !mr-0">progress_activity</span></span>
            </button>
            <button id="copyBtn" class="generate-btn bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-full shadow-lg flex items-center gap-2 !border-teal-400 !shadow-teal-400/50">
                <span class="material-symbols-outlined !text-white !text-2xl !mr-0">content_copy</span>
                <span id="copyBtnText">Copy Details</span>
            </button>
        </div>
        
        <div id="cityDisplay" class="hidden">
            <!-- City Header -->
            <div class="glass-card p-6 mb-8 text-center" style="animation-delay: 0ms;">
                <h2 id="cityName" class="title-font text-4xl font-bold text-white"></h2>
                <p id="cityTagline" class="text-gray-300 italic text-lg"></p>
            </div>

            <!-- Main Grid -->
            <div class="flex flex-wrap justify-center gap-6">
                
                <!-- Overview Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 100ms;">
                    <div class="card-header"><span class="material-symbols-outlined">public</span><h3>Overview</h3></div>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between"><strong class="text-gray-300">Population:</strong> <span id="population" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Size:</strong> <span id="citySize" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Density:</strong> <span id="density" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Location:</strong> <span id="location" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Government:</strong> <span id="government" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Languages:</strong> <span id="languages" class="text-right"></span></div>
                    </div>
                </div>
                
                <!-- Demographics Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 200ms;">
                    <div class="card-header"><span class="material-symbols-outlined">groups</span><h3>Demographics</h3></div>
                    <div id="raceDemographics" class="space-y-2"></div>
                </div>
                
                <!-- Economy Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 300ms;">
                    <div class="card-header"><span class="material-symbols-outlined">monetization_on</span><h3>Economy</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Industries:</strong> <span id="industries" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Exports:</strong> <span id="exports" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Trade Partners:</strong> <span id="tradePartners" class="block text-gray-400"></span></div>
                        <div>
                            <div class="flex justify-between"><strong class="text-gray-300">Wealth:</strong> <span id="wealth"></span></div>
                            <div class="progress-bar mt-1"><div id="wealthBar" class="progress-fill bg-green-500"></div></div>
                        </div>
                    </div>
                </div>
                
                <!-- Architecture Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 400ms;">
                    <div class="card-header"><span class="material-symbols-outlined">architecture</span><h3>Architecture</h3></div>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between"><strong class="text-gray-300">Style:</strong> <span id="architectureStyle" class="text-right"></span></div>
                        <div><strong class="text-gray-300">Features:</strong> <span id="architectureFeatures" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Materials:</strong> <span id="buildingMaterials" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Fortifications:</strong> <span id="fortifications" class="block text-gray-400"></span></div>
                    </div>
                </div>
                
                <!-- Geography Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 500ms;">
                    <div class="card-header"><span class="material-symbols-outlined">landscape</span><h3>Geography</h3></div>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between"><strong class="text-gray-300">Terrain:</strong> <span id="terrain" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Climate:</strong> <span id="climate" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Water Source:</strong> <span id="waterSource" class="text-right"></span></div>
                        <div class="flex justify-between"><strong class="text-gray-300">Elevation:</strong> <span id="elevation" class="text-right"></span></div>
                    </div>
                </div>
                
                <!-- Culture Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 600ms;">
                    <div class="card-header"><span class="material-symbols-outlined">theater_comedy</span><h3>Culture & Society</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Popular Classes:</strong> <span id="popularClasses" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Religions:</strong> <span id="religions" class="block text-gray-400"></span></div>
                        <div>
                            <div class="flex justify-between"><strong class="text-gray-300">Crime:</strong> <span id="crime"></span></div>
                            <div class="progress-bar mt-1"><div id="crimeBar" class="progress-fill bg-red-500"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between"><strong class="text-gray-300">Magic:</strong> <span id="magic"></span></div>
                            <div class="progress-bar mt-1"><div id="magicBar" class="progress-fill bg-purple-500"></div></div>
                        </div>
                    </div>
                </div>

                <!-- Factions Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 700ms;">
                    <div class="card-header"><span class="material-symbols-outlined">groups_2</span><h3>Factions & Guilds</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Major Faction:</strong> <span id="majorFaction" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Notable Guilds:</strong> <span id="guilds" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Secret Societies:</strong> <span id="secretSocieties" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Criminal Orgs:</strong> <span id="criminalOrgs" class="block text-gray-400"></span></div>
                    </div>
                </div>
                
                <!-- City Districts Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 800ms;">
                    <div class="card-header"><span class="material-symbols-outlined">holiday_village</span><h3>Districts & Quarters</h3></div>
                    <div id="districtsList" class="space-y-4"></div>
                </div>
                
                <!-- Points of Interest Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 900ms;">
                    <div class="card-header"><span class="material-symbols-outlined">explore</span><h3>Notable Locations</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Taverns:</strong> <span id="taverns" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Shops & Markets:</strong> <span id="shops" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Landmarks:</strong> <span id="landmarks" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Magical Locations:</strong> <span id="magicalLocations" class="block text-gray-400"></span></div>
                    </div>
                </div>

                <!-- City Description Card -->
                <div class="glass-card p-6 w-full lg:w-[64.5%]" style="animation-delay: 1000ms;">
                    <div class="card-header"><span class="material-symbols-outlined">history_edu</span><h3>City Description</h3></div>
                    <p id="cityDescription" class="text-gray-300 leading-relaxed"></p>
                </div>

                <!-- History & Heraldry Card -->
                <div class="glass-card p-6 w-full md:w-[48%] lg:w-[31%]" style="animation-delay: 1100ms;">
                    <div class="card-header"><span class="material-symbols-outlined">shield</span><h3>History & Heraldry</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Defining Event:</strong> <span id="historyEvent" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Heraldry:</strong> <span id="heraldry" class="block text-gray-400"></span></div>
                    </div>
                </div>

                <!-- Notable NPCs Section -->
                <div class="glass-card p-6 w-full" style="animation-delay: 1200ms;">
                    <div class="card-header"><span class="material-symbols-outlined">person_pin</span><h3>Notable NPCs</h3></div>
                    <div id="npcList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
                
                <!-- Local Customs Card -->
                <div class="glass-card p-6 w-full md:w-[48%]" style="animation-delay: 1300ms;">
                    <div class="card-header"><span class="material-symbols-outlined">celebration</span><h3>Local Life</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Atmosphere:</strong> <span id="atmosphere" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Festival:</strong> <span id="festival" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Tradition:</strong> <span id="tradition" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Cuisine:</strong> <span id="cuisine" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Notable Law:</strong> <span id="notableLaw" class="block text-gray-400"></span></div>
                    </div>
                </div>
                
                <!-- Plot Hooks Card -->
                <div class="glass-card p-6 w-full md:w-[48%]" style="animation-delay: 1400ms;">
                    <div class="card-header"><span class="material-symbols-outlined">local_library</span><h3>Plot Hooks & Problems</h3></div>
                    <div class="space-y-3 text-sm">
                        <div><strong class="text-gray-300">Major Threat:</strong> <span id="majorThreat" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Political Intrigue:</strong> <span id="politicalIntrigue" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Rumors:</strong> <span id="rumors" class="block text-gray-400"></span></div>
                        <div><strong class="text-gray-300">Quest Opportunity:</strong> <span id="quest" class="block text-gray-400"></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ARRAYS ---
        // This section contains all the raw data used for generation.
        // It has been significantly expanded from the original version.
        
        const prefixes = ["Al", "Bar", "Cal", "Dor", "El", "Fal", "Gor", "Har", "Il", "Jor", "Kel", "Lor", "Mor", "Nor", "Oth", "Pel", "Quar", "Riv", "Sel", "Tor", "Ul", "Val", "Wes", "Xan", "Yar", "Zor", "Thal", "Shar", "Bel", "Cyr"];
        const middles = ["an", "ar", "en", "il", "or", "ur", "ath", "ith", "oth", "esh", "ish", "osh", "ash", "eth", "yth", "al", "el", "ol", "ul", "ir", "am", "im", "om", "yn", "ys", "rin", "thin", "wyn", "lyr", "mir"];
        const suffixes = ["dor", "mar", "ton", "ven", "wick", "ford", "stead", "burg", "holm", "crest", "watch", "spire", "haven", "port", "reach", "rock", "fall", "glen", "hollow", "keep", "moor", "peak", "ridge", "vale", "wood", "gate", "run", "dale", "hold", "guard", "way", "cross", "break", "rest", "forge"];
        const standalone = ["Duskendale", "Brightwater", "Stormhaven", "Mooncrest", "Dragonfell", "Silvermarsh", "Goldspire", "Ironford", "Shadowfen", "Highcliff", "Deepwood", "Fairwind", "Stonebridge", "Blackmoor", "Whitepeak", "Winterhold", "Ravenspire", "Summerhaven", "Falcon's Rest", "Darkwater", "Waterdeep", "Neverwinter", "Baldur's Gate", "Icewind Dale", "Myth Drannor"];
        const locations = ["Along the Sword Coast", "In the Dalelands", "Near the Sea of Fallen Stars", "In the North", "In the Western Heartlands", "In Amn", "In Tethyr", "In the Silver Marches", "In the Unapproachable East", "In the Shaar", "On the Moonsea", "In the Vilhon Reach", "In the Lake of Steam region", "In the Chultan Peninsula", "In the Underdark", "On an island in the Trackless Sea", "In the High Forest", "In the Anauroch desert", "In the Storm Horns mountains", "Along the River Chionthar", "Near the Marsh of Chelimber", "In the Graypeak Mountains", "In the Savage Frontier", "Near the Spine of the World", "In the Dragon Coast", "Nestled in the Nether Mountains", "At the edge of the Vast Swamp", "Near the Fields of the Dead", "In the shadows of Cormanthor", "On the shores of the Dragonmere", "At the foot of the Giant's Run Mountains"];
        const governments = ["Monarchy", "Council of Merchants", "Mageocracy", "Theocracy", "Military Dictatorship", "Oligarchy", "Democracy", "Feudal System", "Guild-run", "Tribal Council", "Magistrate Rule", "Undead Overlord", "Dragon Rule", "Plutocracy", "Anarchy", "Matriarchy", "Patriarchy", "Elder Council", "Divine Mandate", "Secret Society Control", "Merchant Consortium", "Adventurer's Guild Leadership", "Druid Circle Guidance", "Noble Houses Coalition", "Paladin Order", "Bardic College Administration", "Warlock Pact Collective", "Celestial Envoy Oversight", "Planar Embassy Rule"];
        const citySizes = [{ name: "Village", population: "100-1,000" }, { name: "Small Town", population: "1,000-5,000" }, { name: "Large Town", population: "5,000-10,000" }, { name: "Small City", population: "10,000-25,000" }, { name: "Medium City", population: "25,000-50,000" }, { name: "Large City", population: "50,000-100,000" }, { name: "Metropolis", population: "100,000+" }];
        const densities = ["Very sparse (rural)", "Sparse", "Moderate", "Dense", "Very dense (urban)", "Extremely dense (crowded)", "Variable (sprawling)", "Clustered (pocket settlements)", "Layered (vertical city)", "Subterranean (cave dwellings)"];
        const architectureStyles = ["Gothic", "Romanesque", "Elven Elegance", "Dwarven Stonework", "Moorish", "Byzantine", "Nordic", "Oriental", "Mage-touched", "Underdark", "Pirate-inspired", "Naval", "Agricultural", "Militaristic", "Religious", "Arcane", "Decadent", "Ruined", "Rebuilt", "Eclectic Mix", "Halfling Burrows", "Gnomish Invention", "Dragonborn Scaled", "Tiefling Infernal", "Necromantic", "Fey-court", "Celestial", "Planar Convergence", "Living Fungal"];
        const architectureFeatures = ["Tall spires", "Underground tunnels", "Canals", "Floating districts", "Tree-top walkways", "Massive walls", "Glass domes", "Hanging gardens", "Elevated walkways", "Magical lighting", "Flying buttresses", "Underground cities", "Portals to other planes", "Living buildings", "Shifting architecture", "Crystal structures", "Bone towers", "Petrified wood buildings", "Waterfront docks", "Multi-level city", "Rotating towers", "Mirage illusions", "Weather-controlling domes", "Lava channels", "Musical bridges", "Shadow-casting monuments", "Dream-capturing spires", "Constellation-aligned streets", "Mist-gathering fountains"];
        const buildingMaterials = ["Stone", "Wood", "Brick", "Marble", "Crystal", "Magically reinforced", "Living plants", "Bone", "Obsidian", "Metal", "Petrified wood", "Ice", "Adobe", "Thatch", "Mud brick", "Glass", "Compacted earth", "Coral", "Fungal growth", "Unknown alien material", "Dragon scales", "Magically transmuted substances", "Spell-woven energy", "Planar matter", "Elemental essence", "Godforged metal", "Enchanted cloth", "Living wood", "Hardened light"];
        const fortifications = ["None", "Simple wooden palisade", "Stone walls", "High walls with towers", "Massive walls with magical defenses", "Citadel at center", "Multiple layered walls", "Floating defensive platforms", "Underground bunkers", "Maze-like streets designed for defense", "Living walls of thorny plants", "Animated statues", "Elemental guardians", "Glyphs and wards", "Moat with drawbridges", "Cliffside defenses", "Hidden escape tunnels", "Magical barrier", "Dimensional locks", "Dragon perches", "Invisible force fields", "Sentient defensive system", "Mind-influencing wards", "Golem sentries", "Phase-shifting walls", "Time-dilating defenses", "Prismatic barriers", "Antimagic fields", "Soul-binding protections"];
        const terrains = ["Plains", "Hills", "Mountains", "Forest", "Jungle", "Desert", "Tundra", "Swamp", "Coastal", "Island", "Underground", "Floating", "Cliffside", "Volcanic", "Marsh", "River delta", "Plateau", "Canyon", "Fey-touched", "Shadow-infused", "Crystal fields", "Petrified forest", "Magical wastes", "Fungal caverns", "Asteroid field", "Glacial", "Geothermal", "Aberrant landscape", "Planar convergence", "Ancient battlefield"];
        const climates = ["Temperate", "Cold", "Warm", "Arid", "Humid", "Frigid", "Tropical", "Mediterranean", "Magically altered", "Variable", "Eternal spring", "Perpetual autumn", "Controlled by magic", "Storm-wracked", "Fog-shrouded", "Dusty", "Misty", "Rainy", "Windy", "Strange planar influences", "Elemental air dominant", "Elemental water dominant", "Elemental fire dominant", "Elemental earth dominant", "Ethereal mists", "Shadow-touched", "Feywild-influenced", "Artificially maintained", "Seasonally extreme", "Ley line converged"];
        const waterSources = ["River", "Lake", "Oasis", "Underground springs", "Magical creation", "Rain collection", "Desalination", "Ice melt", "Portals to elemental plane of water", "Condensation towers", "Aqueducts", "Wells", "Artesian springs", "Tidal flows", "Living water creatures", "Divine blessing", "Elemental binding", "Dew collectors", "Cloud siphoning", "Alchemical processes", "Glacial runoff", "Steam vents", "Wandering magical springs", "Water-producing plants", "Imported from other planes", "Tears of a god", "Enchanted fog harvesting", "Liquid transmutation", "Blood rivers"];
        const elevations = ["Sea level", "Lowlands", "Hills", "Mountainous", "Underground", "Floating", "Cliffside", "Valley", "Plateau", "Canyon", "Suspended in trees", "Built into a giant creature", "Flying", "On a massive bridge", "In a crater", "On a glacier", "On a massive tree", "On a giant mushroom", "On a floating island", "In a massive geode", "Stepping terraces", "Multiple planes", "Inside a dormant volcano", "Within a colossal statue", "Planar rift", "Giant staircase city", "Nested elevations", "Upside-down", "Vertically aligned towers", "Dimensional pockets"];
        const industries = ["Agriculture", "Mining", "Fishing", "Lumber", "Textiles", "Metalworking", "Shipbuilding", "Magic items", "Alchemy", "Glassmaking", "Pottery", "Weapons", "Armor", "Spices", "Wine", "Livestock", "Hunting", "Trapping", "Fur trade", "Slave trade", "Information brokering", "Smuggling", "Piracy", "Mercenary work", "Art", "Spellcasting services", "Planar goods", "Soul binding", "Teleportation", "Necromancy", "Monster parts", "Dragon products", "Magic scrolls", "Herbalism", "Gemcutting", "Dream harvesting", "Prophecy selling", "Beast training", "Divine artifacts", "Cursed objects removal"];
        const exports = ["Grain", "Ore", "Fish", "Timber", "Cloth", "Metal goods", "Ships", "Magic items", "Potions", "Glass", "Ceramics", "Weapons", "Armor", "Spices", "Wine", "Livestock", "Furs", "Slaves", "Information", "Art", "Exotic animals", "Rare plants", "Ancient artifacts", "Spell components", "Mercenaries", "Magical creatures", "Enchanted tools", "Dimensional pockets", "Sentient constructs", "Elemental essences", "Undead servants", "Planar maps", "Golem parts", "Divination services", "Soul contracts", "Memory crystals", "Time in a bottle", "Preserved monster specimens"];
        const tradePartners = ["Waterdeep", "Baldur's Gate", "Neverwinter", "Silverymoon", "Mirabar", "Luskan", "Calimport", "Athkatla", "Suzail", "Westgate", "Zhentil Keep", "Hillsfar", "Mulmaster", "Phlan", "Elturgard", "Daggerford", "Secomber", "Tethyr", "Amn", "Thay", "Underdark cities", "Elven settlements", "Dwarven strongholds", "Gnomish enclaves", "Dragonmarked houses", "Candlekeep", "Elemental Planes merchants", "Feywild trade posts", "Shadow Plane smugglers", "City of Brass", "Sigil portals", "Drow houses", "Giant clans", "Dragon territories", "The Beastlands", "Mechanus constructs", "Devils of the Nine Hells", "Celestial emissaries"];
        const wealthLevels = ["Destitute", "Poor", "Modest", "Comfortable", "Wealthy", "Very wealthy", "Extremely wealthy", "Decadently rich", "Planar wealth", "Divine treasury"];
        const popularClasses = ["Fighters", "Rogues", "Wizards", "Clerics", "Rangers", "Paladins", "Druids", "Bards", "Barbarians", "Monks", "Sorcerers", "Warlocks", "Artificers", "Blood hunters", "Psions", "Runecasters", "Shadowdancers", "Arcane archers", "War priests", "Battlemages", "Beast masters", "Eldritch knights", "Assassins", "Necromancers", "Demonologists", "Elementalists", "Void callers", "Sword mages", "Oath breakers", "Wild mages"];
        const religions = ["Worship of the Seldarine (elven pantheon)", "Moradin and the dwarven pantheon", "The Triad (Tyr, Torm, Ilmater)", "The Moonmaiden (Selûne)", "The Morninglord (Lathander)", "The Dead Three (Bane, Bhaal, Myrkul)", "Mystra's faith", "The Red Knight", "Tempus", "Gond", "Oghma", "Chauntea", "Sune", "Shar", "Cyric", "Talos", "Local deity", "Primordial worship", "Dragon cult", "Demon worship", "No organized religion", "Mask (God of Thieves)", "Waukeen (Goddess of Trade)", "Silvanus (God of Nature)", "Umberlee (Goddess of the Sea)", "Asmodeus cult", "The Raven Queen", "Ancient titans", "Elemental princes", "Archfey pacts", "Forgotten gods", "Celestial patrons", "Ancestor worship", "Star cults", "Outer Gods followers"];
        const crimeLevels = ["Virtually nonexistent", "Very low", "Low", "Moderate", "High", "Very high", "Rampant", "Controlled by thieves' guilds", "Organized crime rules", "Anarchy", "Underground fighting rings", "Secret assassination network", "Corrupt guard presence", "Political blackmail system", "Infiltrated by cultists", "Monster trafficking", "Magical contraband trade", "Soul selling operations", "Forbidden magic black market", "Mind control syndicate"];
        const magicLevels = ["Nonexistent", "Very rare", "Uncommon", "Common", "Widespread", "Very common", "Ubiquitous", "Arcane city", "Magocracy", "Magical experiments everywhere", "Wild magic zones", "Anti-magic pockets", "Magic is currency", "Spell-dependent economy", "Magic addiction epidemic", "Enchanted daily life", "Magical power struggles", "Dangerous arcane pollution", "Spellplague affected", "Weave-warped reality"];
        const races = [{ name: "Humans", color: "bg-blue-500" }, { name: "Elves", color: "bg-green-500" }, { name: "Dwarves", color: "bg-yellow-500" }, { name: "Halflings", color: "bg-red-500" }, { name: "Gnomes", color: "bg-purple-500" }, { name: "Half-Elves", color: "bg-indigo-500" }, { name: "Half-Orcs", color: "bg-orange-500" }, { name: "Tieflings", color: "bg-pink-500" }, { name: "Dragonborn", color: "bg-teal-500" }, { name: "Genasi", color: "bg-cyan-500" }, { name: "Aasimar", color: "bg-amber-500" }, { name: "Goliaths", color: "bg-lime-500" }, { name: "Tabaxi", color: "bg-fuchsia-500" }, { name: "Kenku", color: "bg-rose-500" }, { name: "Other", color: "bg-gray-500" }];
        const languages = ["Common", "Elvish", "Dwarvish", "Halfling", "Gnomish", "Draconic", "Infernal", "Celestial", "Undercommon", "Giant", "Orcish", "Abyssal", "Primordial", "Sylvan", "Deep Speech", "Thieves' Cant", "Druidic", "Sign language", "Regional dialect", "Secret tongue", "Ancient Netherese", "High Elvish", "Dethek (dwarven runes)", "Thorass (Old Common)", "Alzhedo (Calishite)", "Chondathan", "Illuskan", "Thayan", "Rashemi", "Shou", "Aquan", "Auran", "Ignan", "Terran", "Telepathy"];
        const taglines = ["Where shadows whisper and gold flows like water.", "A jewel of the North, rough-cut but shining bright.", "The city of a thousand spires and ten thousand secrets.", "Built on magic, ruled by steel.", "Where the river meets the road and all paths converge.", "A beacon of civilization in the wild lands.", "The city that never sleeps, for nightmares walk its streets.", "Carved from the living rock, a testament to dwarven ingenuity.", "Floating on the clouds, touched by the divine.", "A den of scoundrels and thieves, but oh what treasures they hold!", "Last bastion before the untamed wilderness.", "Where fortunes are made and souls are sold.", "City of splendor, city of wonder, city of dangers untold.", "The crossroads of fate where destinies collide.", "Built on ancient ruins, reaching for tomorrow's skies.", "Where the old gods still whisper to those who listen.", "Forged in fire, tempered by time, unyielding as stone.", "The jewel of the realm, faceted with equal parts beauty and blood.", "Where magic and mundane dance their eternal waltz.", "The nexus where a thousand realms touch and trade their wonders."];
        const cityDescriptions = ["This city has stood for centuries, weathering wars, plagues, and magical catastrophes. Its streets tell stories of glory and ruin, with each district bearing the marks of different eras in its architecture and culture.", "A relatively new settlement by Faerûnian standards, this city has rapidly grown due to its strategic location and abundant resources. The mix of old traditions and new ideas creates a vibrant, if sometimes chaotic, atmosphere.", "Ancient beyond memory, this city was old when Netheril was young. Its foundations contain secrets best left buried, though scholars and adventurers constantly seek them out.", "Built upon layer upon layer of previous civilizations, this city is literally and figuratively deep. The upper levels gleam with wealth and power, while the lower levels descend into darkness and mystery.", "Perched precariously in a dangerous location, this city survives through a combination of stubbornness, ingenuity, and sheer luck. Its people are hardened by their environment but proud of their home.", "A city of contrasts, where splendor and squalor exist side by side. The wealthy live in opulent towers while the poor scrape by in shadowed alleys, yet all share a fierce love for their city.", "Known for its stunning beauty and artistic culture, this city attracts bards, artists, and philosophers from across Faerûn. Its walls are adorned with murals and its squares filled with music.", "A grim, utilitarian city where function outweighs form. Its people are practical to a fault, valuing strength and skill above all else. Not a place for the weak or faint of heart.", "Shrouded in mist and mystery, this city seems half-real at times. Visitors speak of streets that shift when no one is looking and buildings that weren't there yesterday.", "A melting pot of cultures and races, this city thrives on diversity. Dozens of languages can be heard in its markets, and its cuisine is legendary across the Sword Coast.", "This city lives and dies by the tides, its fortunes rising and falling with the sea. The scent of salt and exotic spices fills the air, and tales from distant shores are its currency.", "A fortress city that has never fallen, its walls bear the scars of a hundred sieges. Its people are as unyielding as its ramparts, proud and stubborn to a fault.", "The city seems to have grown organically from the land itself, buildings and streets following the natural contours of the terrain. There's no clear plan to its layout, giving it a chaotic but strangely harmonious feel.", "From a distance, the city's magical illumination creates a spectacle that draws travelers like moths to flame. Some come seeking enlightenment, others to exploit the constant flow of visitors and their coin.", "A city that reimagines itself with each generation, tearing down the old to build anew. Only a few ancient landmarks remain as anchors to its past, while innovation and ambition propel it forward.", "This settlement began as a temporary camp and somehow never left. Structures intended to last a season have been repeatedly reinforced and expanded over decades, creating a unique architectural hodgepodge.", "The city wears its violent history like a badge of honor. Every tower, wall, and gate has a name and a story attached to it, usually involving memorable battles or heroic last stands.", "This city exists in symbiosis with an unusual natural feature or magical phenomenon. Its culture, economy, and daily life are all shaped by this relationship, creating traditions found nowhere else in Faerûn.", "A city of scholars and scribes, where knowledge is the most valuable currency. Libraries and archives compete to acquire rare texts, while sages debate esoteric points of lore in open forums.", "The entire city serves a singular purpose, whether religious, military, or arcane. Every aspect of its design and society supports this function, creating an environment of intense specialization and focus."];
        const factions = ["The Silver Hand (Paladin Order)", "Emerald Enclave (Nature Protectors)", "Lords' Alliance (Noble Coalition)", "Zhentarim (Mercenary Company)", "Harpers (Secret Do-gooders)", "Red Wizards of Thay (Mages)", "Knights of the Shield (Merchant Spies)", "Iron Throne (Ruthless Merchants)", "Cult of the Dragon (Dragon Worshippers)", "Kraken Society (Secret Network)", "Purple Dragons (Cormyrean Knights)", "Moonstars (Mage Collective)", "Shadow Thieves (Criminal Organization)", "Fire Knives (Assassins)", "Earthfast (Dwarven Clan)", "House Obarskyr (Noble Family)", "Order of the Gauntlet (Righteous Warriors)", "Many-Starred Cloak (Diviners)", "Circle of Rust and Worm (Decay Druids)", "Cult of the Absolute (Growing Zealots)", "House Baenre (Drow House)", "Black Network (Criminal Enterprise)", "Arcane Brotherhood (Wizards)", "Fellowship of the Purple Staff (Mystics)", "Xanathar Guild (Crime Syndicate)", "Bregan D'aerthe (Drow Mercenaries)", "Eldreth Veluuthra (Elf Supremacists)", "Merchant Princes (Trade Consortium)", "Cult of Shar (Shadow Worshippers)", "Order of Samular (Holy Knights)"];
        const guilds = ["Alchemists' Guild", "Armorers' Guild", "Bakers' Guild", "Blacksmiths' Guild", "Brewers' Guild", "Carpenters' Guild", "Clothiers' Guild", "Cobblers' Guild", "Gemcutters' Guild", "Glassblowers' Guild", "Jewelers' Guild", "Leatherworkers' Guild", "Masons' Guild", "Merchants' Guild", "Metalsmiths' Guild", "Miners' Guild", "Painters' Guild", "Potters' Guild", "Scribes' Guild", "Shipwrights' Guild", "Stonemasons' Guild", "Tanners' Guild", "Wainwrights' Guild", "Weavers' Guild", "Wizards' Guild", "Adventurers' Guild", "Healers' Guild", "Bards' College", "Poisoners' Guild", "Beast Tamers' Guild", "Cartographers' Guild", "Planar Travelers' Guild", "Dream Harvesters' Guild", "Soul Binders' Guild", "Elemental Channelers' Guild"];
        const secretSocieties = ["The Whispering Way", "Circle of the Ebon Star", "Keepers of the Eternal Flame", "Order of the Veiled Eye", "Brotherhood of the Wolf", "Sisters of the Silver Moon", "The Ashen Hand", "Disciples of the Broken Crown", "The Midnight Council", "Guardians of the Hidden Path", "Children of the Forgotten God", "The Enlightened", "Seekers of the Hidden Truth", "The Shadowcloaks", "Masters of the Fifth Voice", "The Everwatch", "Servants of the Crystal Shard", "The Nameless", "Followers of the Seventh Signing", "The Inscrutable", "Keepers of Forbidden Lore", "The Undying Court", "The Silent Syndicate", "The Planeswalkers' Conclave", "The Nightmare Weavers", "Void Speakers", "The Starborn", "Cult of the Unseeing Eye", "The Faceless", "Inheritors of Ancient Glory", "The Timeless", "The Veiled Alliance", "Wardens of Reality", "The Illuminated"];
        const criminalOrganizations = ["The Black Fingers", "The Crimson Daggers", "Emerald Vipers", "Shadow Network", "The Untouchables", "Dock Street Gang", "The Silent Blades", "Thieves' Guild", "The Nightwalkers", "Golden Hand", "Red Sashes", "Tunnel Rats", "The Unseen", "Harbor Lords", "The Cutters", "Wharf Rats", "The Broken Circle", "Market Street Gang", "The Talons", "Sewer Kings", "The Viper's Nest", "Grey Ghost Gang", "The Silent Death", "Moonlight Shadows", "The Butcher's Boys", "Dusk Till Dawn", "The Rookery", "Night Market Syndicate", "The Whispering Knives", "The Scarlet Chain", "The Moondancers", "Dockside Devourers", "The Last Laugh", "The Spider's Web", "The Shrouded Hand", "The Blood Coins"];
        const districtTypes = [{ name: "Noble Quarter", color: "bg-purple-600" }, { name: "Merchant District", color: "bg-yellow-600" }, { name: "Temple District", color: "bg-blue-600" }, { name: "Artisan's Quarter", color: "bg-green-600" }, { name: "Harbor District", color: "bg-cyan-600" }, { name: "Market District", color: "bg-orange-600" }, { name: "Slums", color: "bg-gray-600" }, { name: "Entertainment District", color: "bg-pink-600" }, { name: "Mage's Quarter", color: "bg-indigo-600" }, { name: "Foreign Quarter", color: "bg-red-600" }, { name: "Military District", color: "bg-gray-800" }, { name: "Garden District", color: "bg-emerald-600" }, { name: "University Quarter", color: "bg-amber-600" }, { name: "Undercity", color: "bg-stone-600" }, { name: "Factory District", color: "bg-zinc-600" }, { name: "Floating District", color: "bg-sky-600" }, { name: "Necropolis", color: "bg-neutral-600" }, { name: "Embassy Row", color: "bg-violet-600" }, { name: "Adventurer's Quarter", color: "bg-lime-600" }, { name: "Planar District", color: "bg-fuchsia-600" }];
        const districtDescriptions = ["Center of wealth and power where nobles vie for influence.", "Bustling commercial area full of shops and businesses.", "Dominated by temples, shrines, and religious orders.", "Where craftspeople ply their trades and sell their wares.", "Rough-and-tumble area filled with sailors and dock workers.", "Vibrant marketplace with goods from across Faerûn.", "Poverty-stricken area with desperate people and crumbling buildings.", "Full of taverns, theaters, gambling halls, and other diversions.", "Where arcane practitioners conduct research and sell services.", "Home to immigrants from other lands and cultures.", "Housing barracks, training grounds, and military facilities.", "Lush green spaces, parks, and manicured estates.", "Centers of learning with libraries, schools, and lecture halls.", "The hidden city beneath, home to outcasts and strange creatures.", "Filled with workshops, smoke, and the sounds of industry.", "Magically suspended above the city or on water.", "City of the dead with tombs, mausoleums, and memorials.", "Where foreign powers maintain diplomatic presence.", "Catering to adventurers with equipment shops and quest boards.", "Where beings from other planes gather and trade exotic goods."];
        const tavernNames = ["The Drunken Dragon", "The Prancing Pony", "The Slumbering Sphinx", "The Laughing Beholder", "The Rusty Tankard", "The Silver Chalice", "The Wandering Wyvern", "The Broken Blade", "The Sleeping Giant", "The Dancing Dryad", "The Thirsty Troll", "The Gilded Rose", "The Salty Dog", "The Three-Legged Kobold", "The Winking Siren", "The Grinning Gargoyle", "The Tipsy Pixie", "The Roaring Lion", "The Whispering Raven", "The Staggering Ogre", "The Phoenix Tail", "The Dwarf's Beard", "The Lucky Halfling", "The Copper Coin", "The Smoking Pipe", "The Bloody Knuckle", "The Captain's Rest", "The Dire Wolf", "The Bottomless Mug", "The Glowing Staff", "The Soggy Bottom", "The Leaky Barrel", "The Drunken Cleric", "The Satyr's Dance", "The Black Unicorn", "The Wizard's Sleeve"];
        const shopNames = ["Arcane Wonders", "The Sharpened Edge", "Dragon's Hoard Gems", "Elminster's Scrolls", "Durable Armaments", "Nature's Remedies", "The Adventurer's Pack", "Mystic Potions", "Dwarven Metalworks", "Elven Bowcraft", "Exotic Curios", "Reliable Provisions", "Featherfall Clothiers", "Golem's Gear", "Whispering Winds Books", "Celestial Trinkets", "Blackstaff's Components", "The Cartographer's Table", "Enchanted Threads", "Familiar Friends", "Glittergold's Gadgets", "The Holy Symbol", "Instrument of the Bards", "Journeyman's Tools", "Keeper's Lock & Key", "Leomund's Tiny Hut", "Magical Menagerie", "Neverwinter Nights Lanterns", "Oathkeeper's Forge", "Prestidigitation Cleaners", "Quiver of Plenty", "Rustmonster Antiques", "Silverbeard's Pipes", "Tenser's Floating Emporium", "Underdark Imports", "Vigilant Eye Optics"];
        const landmarks = ["Ancient temple", "Grand plaza", "Historic battlefield", "Massive statue", "Magical fountain", "Famous bridge", "Memorial monument", "Great library", "Royal palace", "Cathedral", "Fortified keep", "Public gardens", "Ancient tree", "Observatory", "Colosseum", "Theater", "Wizard's tower", "Guild headquarters", "Public baths", "Ornate gates", "Underground labyrinth", "Sacred grove", "Historic ruins", "Hanging gardens", "Elemental shrine", "Planar gateway", "Petrified titan", "Celestial observatory", "Living statue", "Ancient portal", "Dimensional anomaly", "Dragon's lair", "Floating monolith", "Moving maze", "Enchanted waterfall", "God's footprint"];
        const magicalLocations = ["Wild magic zone", "Ley line nexus", "Wizard's academy", "Teleportation circle", "Portal to another plane", "Enchanted spring", "Magic item shop", "Divination parlor", "Elemental binding site", "Arcane laboratory", "Spellcaster's guild", "Familiars market", "Golem workshop", "Illusion house", "Conjuration arena", "Necromancer's tower", "Transmutation fountain", "Evocation training grounds", "Abjuration shields", "Scrying pool", "Enchantment salon", "Dragon's blood spring", "Wish fountain", "Reality warp", "Feywild crossing", "Shadow realm tear", "Time distortion", "Memory crystal vault", "Dream harvesting center", "Soul binding furnace", "Mind enhancement spa", "Magic dead zone", "Living spell preserve", "Spell component bazaar", "Magic weapon forge", "Scroll library"];
        const npcFirstNames = ["Alaric", "Brienne", "Caspian", "Drusilla", "Evendur", "Fiora", "Gareth", "Helaina", "Isolde", "Jareth", "Keira", "Lucan", "Myrtle", "Niles", "Ophelia", "Percival", "Qara", "Rowan", "Seraphina", "Thaddeus", "Uma", "Varis", "Winifred", "Xander", "Yvette", "Zephyr", "Aldric", "Beatrix", "Cedric", "Daria", "Eldon", "Freya", "Garrick", "Hilda", "Ignatius", "Johanna", "Kieran", "Lyra", "Magnus", "Nessa", "Orrin", "Phaedra", "Quintus", "Rhiannon", "Silas", "Talia", "Ulric", "Valeria", "Willow", "Xanthus", "Yseult", "Zander", "Adeline", "Balthazar", "Cordelia", "Darius"];
        const npcLastNames = ["Ambershield", "Blackwater", "Crestfallen", "Darkmantle", "Emberstone", "Frostbeard", "Glimmergold", "Hollowbrook", "Ironheart", "Jewelspinner", "Knightforge", "Lightbringer", "Mistwalker", "Nightshade", "Oathkeeper", "Proudmane", "Quicksilver", "Ravencrest", "Silverhand", "Thorngage", "Underhill", "Voidwalker", "Windwhisper", "Yewbranch", "Zephyrblade", "Arakhor", "Blackthorn", "Caskajack", "Duskwalker", "Evenwood", "Flameheart", "Greycastle", "Highwind", "Icevein", "Jadestar", "Kingshield", "Lorebinder", "Moonblade", "Neverdie", "Oakenheel", "Peacebringer", "Quincy", "Redcloak", "Stormchaser", "Trueheart", "Umbermoor", "Valeska", "Wildmane", "Xalorn", "Yelloweye", "Zanathar", "Ashenheart", "Boulderfoot", "Coinpurse", "Dragonbane"];
        const npcOccupations = ["City Guard Captain", "Master Blacksmith", "High Priest", "Guild Master", "Court Wizard", "Master Thief", "Tavern Owner", "Merchant Prince", "Royal Adviser", "Archmage", "Noble Lord/Lady", "Master Alchemist", "Ship Captain", "Retired Adventurer", "Traveling Bard", "Famed Gladiator", "Court Jester", "Master Assassin", "Renown Healer", "Fortune Teller", "City Architect", "Military Commander", "Spymaster", "Crime Lord", "Street Urchin Leader", "Artifact Collector", "Monster Hunter", "Elemental Binder", "Soul Merchant", "Dream Weaver", "Planar Traveler", "Prophecy Speaker", "Legendary Artisan", "Golem Creator", "Dragonrider", "Undead Controller", "Shapeshifter", "Teleportation Expert", "Timekeeper", "Dimensional Tailor"];
        const npcRaces = ["Human", "Elf", "Dwarf", "Halfling", "Gnome", "Half-Elf", "Half-Orc", "Tiefling", "Dragonborn", "Aasimar", "Genasi", "Goliath", "Tabaxi", "Kenku", "Firbolg", "Triton", "Aarakocra", "Changeling", "Warforged", "Yuan-Ti", "Tortle", "Kalashtar", "Shifter", "Goblin", "Hobgoblin", "Bugbear", "Kobold", "Lizardfolk", "Orc", "Minotaur"];
        const npcPersonalities = ["Ambitious", "Cautious", "Curious", "Decisive", "Eccentric", "Friendly", "Grumpy", "Honorable", "Intimidating", "Jovial", "Knowledgeable", "Loyal", "Mysterious", "Nervous", "Observant", "Paranoid", "Quirky", "Ruthless", "Sarcastic", "Temperamental", "Unflappable", "Vengeful", "Wise", "Xenophobic", "Zealous", "Absent-minded", "Boisterous", "Calculating", "Devious", "Enthusiastic", "Farsighted", "Generous", "Hedonistic", "Impulsive", "Judgmental", "Kind", "Logical", "Melancholic", "Noble", "Opportunistic", "Philosophical", "Quick-witted", "Reserved", "Scholarly", "Theatrical"];
        const festivals = ["The Feast of the Moon", "Greengrass Celebration", "Midsummer Festival", "Highharvestide", "Shieldmeet", "The Running of the Trolls", "Dragon's Day", "Festival of Masks", "The Grand Tournament", "Winter Solstice Ball", "Founding Day Celebration", "Remembrance Day", "The Night Market", "Spring Equinox", "Harvest Moon Ball", "The Wild Hunt", "Lantern Festival", "The Blessing of Fleets", "Lovers' Day", "Festival of Fools", "The Great Hunt", "Ascension Day", "The Planar Confluence", "Elements Day", "New Year's Celebration", "The Awakening", "Corellon's Blessing", "Moradin's Forge Day", "Lathander's Dawn", "Selûne's Tears", "The Purple Dragon Parade", "Day of Wonders"];
        const traditions = ["Touching a specific statue for luck", "Throwing coins in a fountain for wishes", "Annual competitions between city districts", "Gift exchange during winter solstice", "Wearing masks during a specific holiday", "Silent day where no one speaks", "Painting doors a specific color to ward off evil", "Midnight processions with lanterns", "Leaving offerings at crossroads for travelers", "Ritual baths before important events", "Children's naming ceremonies at the central temple", "Marriage proposals only allowed on specific days", "First harvest always given to the temple", "Warriors' coming of age trials", "Magical tests for children showing arcane talent", "Ancestor worship on designated days", "Wearing specific colors to indicate social status", "Blessing new buildings with salt and wine", "Lighting candles on water during the new moon", "Trading jobs for a day each year", "Hanging charms on newborns' cribs", "Specific greetings for different social classes", "Secret handshakes among guild members", "Blood oaths for official contracts", "Symbolic duels to settle disputes", "Shadow puppetry to tell history", "Face painting for festivals", "Ritual tattooing for life accomplishments", "Braiding ribbons into hair for luck", "Season-specific clothing colors"];
        const cuisines = ["Spicy dragon pepper stew", "Honeyed elfbread with forest berries", "Dwarven stone fungus soup", "Deep-fried basilisk bites", "Gnomish color-changing pastries", "Halfling comfort pies", "Coastal squid ink pasta", "Chimera three-flavor roast", "Griffon egg omelets", "Wild boar with mountain herbs", "Five-spice owlbear steak", "Desert cactus fruit wine", "Sweetwater eel wrapped in seaweed", "Smoked dire wolf sausages", "Fairy-dusted confections", "Underground mushroom risotto", "Dragonborn fire-breath ale", "Elvish century-aged wine", "Giant spider leg kebabs", "Wizard's changing flavor mead", "Sunfruit preserves", "Fireberry tarts", "Frostberry ice cream", "Hydra head soup (one bowl, many flavors)", "Minotaur milk cheese", "Treant sap syrup", "Displacer beast steaks (hard to eat)", "Cockatrice eggs (not petrified)", "Manticore tail skewers", "Gelatinous cube jelly desserts"];
        const threats = ["Impending invasion from neighboring kingdom", "Cult activity in the sewers", "Dragon sighted in nearby mountains", "Mysterious plague spreading through lower districts", "Tensions between racial communities", "Corruption in the city guard", "Serial killer targeting specific citizens", "Magical anomalies causing strange phenomena", "Economic crisis due to failed trade agreements", "Upcoming succession crisis", "Undead rising from the old cemetery", "Demon summoning ritual preparations", "Thieves' guild war spilling into the streets", "Weather magic gone wrong", "Fey creatures infiltrating the market", "Ancient curse awakening", "Rival city's spies undermining leadership", "Religious conflict between temples", "Beast attacks on the outskirts", "Portal to another plane opening randomly", "Aboleth controlling key city officials", "Vampires establishing a hidden court", "Mind flayers harvesting intellect in the university", "Changelings replacing citizens", "Magical pollution from alchemists' quarter", "Prophecy of city's destruction", "Civil unrest due to food shortages", "Underground slave trade network", "Forbidden magic research causing disturbances", "Time distortions affecting specific streets"];
        const politicalIntrigues = ["Two noble houses competing for royal favor", "Secret heir to the throne discovered", "Foreign ambassador suspected of espionage", "Guild masters rigging council elections", "Religious order seeking political power", "Mayor being blackmailed by unknown entity", "Arranged marriage to secure political alliance", "Power struggle after leader's sudden death", "Forgery of important city documents", "Conspiracy to overthrow current government", "Fraudulent tax collection scheme", "Magical mind control of council members", "False flag operations to blame rival faction", "Secret deals with criminal organizations", "Merchant monopoly through bribery", "Assassination plot against visiting dignitary", "Covert military buildup for coup attempt", "Hidden network of informants and spies", "Disputed land ownership between powerful families", "Foreign infiltration of city defense", "Creation of laws targeting specific groups", "Manipulation of food prices for political gain", "Secret society controlling from shadows", "War profiteering by city officials", "Falsified lineage claims for political advancement", "Border dispute with neighboring city", "Religious persecution disguised as law enforcement", "Suppression of magical practitioners", "Rigged trials against political opponents", "Hidden treasure influencing political decisions"];
        const rumors = ["Hidden treasure beneath the old temple", "The mayor is actually a doppelganger", "Secret tunnels connect all noble houses", "Ghost of the former ruler haunts the castle", "Drinking from the north fountain grants visions", "The blacksmith's sword can kill demons", "Strange lights seen in abandoned tower", "Children disappearing near the old forest", "Merchant selling potions that cause mutations", "Wizard's apprentice accidentally summoned something", "Ancient dragon sleeps beneath the city", "Local wine contains truth serum", "Foreign spies infiltrated the city guard", "Statues in the park move at midnight", "Strange illness caused by cursed jewelry", "Secret fighting pits in the warehouse district", "Certain city officials are undead", "Time moves differently in the old library", "Famous relic in the temple is actually fake", "Noble heir practicing forbidden magic", "Prophetic dreams shared by multiple citizens", "Specific tavern is entrance to thieves' guild", "Talking animals spotted at the city outskirts", "Local cook uses questionable meat sources", "Wealthy merchant made pact with fiend", "Music from nowhere heard in empty alleyways", "Someone selling maps to parallel world", "Wells in the east side have healing properties", "City built on ancient burial ground", "Specific constellation causes strange magic when visible"];
        const quests = ["Retrieve stolen artifact from thieves' guild", "Investigate disappearances in the merchant quarter", "Clear monsters from the sewers", "Protect visiting dignitary from assassination", "Find cure for noble's strange illness", "Resolve dispute between rival families", "Break curse affecting city landmark", "Uncover spy network operating in the city", "Escort important shipment to neighboring town", "Participate in tournament for valuable prize", "Stop ritual being performed by hidden cult", "Find missing person last seen at the docks", "Deliver secret message to undercover agent", "Track down escaped magical creature", "Investigate haunting at prestigious inn", "Recover family heirloom from dangerous ruins", "Gather rare ingredients for master alchemist", "Prove accused citizen's innocence", "Infiltrate noble's mansion to find evidence", "Stop magical experiment threatening city", "Mediate conflict between guilds", "Hunt notorious criminal hiding in city", "Protect endangered magical species", "Recover cargo from shipwreck in harbor", "Map unexplored catacombs beneath city", "Translate ancient text in forgotten language", "Find artist's muse (literal or figurative)", "Escort refugees safely through city", "Sabotage rival city's trade negotiations", "Investigate strange weather phenomena affecting crops"];
        
        // --- NEW DATA ARRAYS ---
        const cityHistoryEvents = ["Founded by a legendary hero after a great battle", "Built around a mysterious magical artifact", "Survived a devastating plague that reshaped its society", "Was once the capital of a fallen empire", "Established as a neutral trading post between warring nations", "Magically transported from another plane long ago", "Grew from a humble pilgrimage site into a metropolis", "Liberated from a dragon's tyranny within living memory", "Built on the back of a colossal, slumbering creature", "The site of a divine intervention that blessed the land"];
        const heraldrySymbols = ["Dragon", "Lion", "Griffon", "Sword", "Shield", "Tower", "Tree", "Star", "Hammer", "Anvil", "Ship", "Kraken", "Book", "Key", "Crown", "Hawk", "Wolf", "Sun", "Moon", "Scales"];
        const heraldryColors = ["Azure (blue)", "Gules (red)", "Sable (black)", "Vert (green)", "Purpure (purple)", "Argent (silver)", "Or (gold)"];
        const cityAtmospheres = ["Hopeful and bustling", "Suspicious and tense", "Oppressive and grim", "Lively and chaotic", "Scholarly and quiet", "Decadent and lazy", "Pious and orderly", "Wild and dangerous", "Mysterious and magical", "Welcoming and diverse"];
        const notableLaws = [
            { law: "All acts of arcane magic must be registered with the Mages' Guild.", punishment: "A hefty fine and mandatory 're-education'." },
            { law: "Bearing arms is forbidden within the Temple District.", punishment: "Confiscation of weapons and a day in the stocks." },
            { law: "It is illegal to speak ill of the ruling council in public.", punishment: "Public shaming and a 'sedition' tax." },
            { law: "All trade must go through officially sanctioned guild brokers.", punishment: "Seizure of goods and expulsion from the city." },
            { law: "Worship of 'dark' deities is punishable by law.", punishment: "Forced conversion or exile." }
        ];

        // --- GENERATION LOGIC ---

        let currentCity = {};

        function getRandom(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateRandomSelection(array, min = 1, max = 4) {
            const count = Math.floor(Math.random() * (max - min + 1)) + min;
            const shuffled = [...array].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count).join(", ");
        }

        function generateCityName() {
            if (Math.random() < 0.3) return getRandom(standalone);
            const useMiddle = Math.random() < 0.5;
            let name = getRandom(prefixes);
            if (useMiddle) name += getRandom(middles);
            name += getRandom(suffixes);
            return name;
        }

        function generateRacePercentages(dominantRace = null) {
            let percentages = new Array(races.length).fill(0);
            let remaining = 100;

            // If a dominant race is specified, give it a boost
            if (dominantRace) {
                const raceIndex = races.findIndex(r => r.name === dominantRace);
                if (raceIndex !== -1) {
                    const boost = 20 + Math.floor(Math.random() * 20); // 20-40%
                    percentages[raceIndex] = boost;
                    remaining -= boost;
                }
            }

            // Distribute the rest
            for (let i = 0; i < races.length - 1; i++) {
                if (remaining <= 0) break;
                const allocation = Math.floor(Math.random() * (remaining / 2));
                percentages[i] += allocation;
                remaining -= allocation;
            }
            percentages[races.length - 1] += remaining; // Add remainder to "Other"

            // Normalize to ensure it's exactly 100
            const total = percentages.reduce((a, b) => a + b, 0);
            if (total !== 100) {
                percentages[0] += 100 - total;
            }
            
            return percentages.map(p => Math.max(0, p)); // Ensure no negative values
        }

        function generateNPC() {
            const firstName = getRandom(npcFirstNames);
            const avatarColor = getRandom(["bg-blue-500", "bg-red-500", "bg-green-500", "bg-purple-500", "bg-yellow-500", "bg-pink-500", "bg-indigo-500", "bg-teal-500"]);
            return {
                name: `${firstName} ${getRandom(npcLastNames)}`,
                race: getRandom(npcRaces),
                occupation: getRandom(npcOccupations),
                personality: getRandom(npcPersonalities),
                avatarColor: avatarColor,
                avatarInitial: firstName.charAt(0)
            };
        }

        function generateDistricts(min = 3, max = 5) {
            const count = Math.floor(Math.random() * (max - min + 1)) + min;
            const shuffledTypes = [...districtTypes].sort(() => 0.5 - Math.random());
            return shuffledTypes.slice(0, count).map(type => ({
                type: type.name,
                color: type.color,
                description: getRandom(districtDescriptions)
            }));
        }

        function generateCity() {
            const city = {};
            
            // --- Cohesion Logic ---
            // Generate some core attributes first to influence others
            city.government = getRandom(governments);
            city.architectureStyle = getRandom(architectureStyles);
            city.terrain = getRandom(terrains);

            // --- Basic Info ---
            city.name = generateCityName();
            city.tagline = getRandom(taglines);
            city.description = getRandom(cityDescriptions);
            
            // --- Size & Population ---
            const size = getRandom(citySizes);
            city.size = size.name;
            city.population = size.population;
            city.density = getRandom(densities);
            
            // --- Location & Government ---
            city.location = getRandom(locations);
            
            // --- Demographics (with cohesion) ---
            let dominantRace = null;
            if (city.architectureStyle === "Dwarven Stonework") dominantRace = "Dwarves";
            if (city.architectureStyle === "Elven Elegance") dominantRace = "Elves";
            city.racePercentages = generateRacePercentages(dominantRace);
            city.languages = generateRandomSelection(languages);
            
            // --- Economy (with cohesion) ---
            let industriesArr = generateRandomSelection(industries, 2, 4).split(', ');
            if ((city.terrain === "Coastal" || city.terrain === "Island") && !industriesArr.includes("Shipbuilding")) {
                industriesArr.push("Shipbuilding");
            }
            if ((city.terrain === "Coastal" || city.terrain === "Island") && !industriesArr.includes("Fishing")) {
                industriesArr.push("Fishing");
            }
            city.industries = industriesArr.join(', ');
            city.exports = generateRandomSelection(exports);
            city.tradePartners = generateRandomSelection(tradePartners);
            city.wealth = getRandom(wealthLevels);
            city.wealthValue = wealthLevels.indexOf(city.wealth) + 1;
            
            // --- Architecture & Geography ---
            city.architectureFeatures = generateRandomSelection(architectureFeatures);
            city.buildingMaterials = generateRandomSelection(buildingMaterials);
            city.fortifications = getRandom(fortifications);
            city.climate = getRandom(climates);
            city.waterSource = getRandom(waterSources);
            city.elevation = getRandom(elevations);
            
            // --- Culture (with cohesion) ---
            city.popularClasses = generateRandomSelection(popularClasses);
            city.religions = generateRandomSelection(religions);
            city.crime = getRandom(crimeLevels);
            city.crimeValue = crimeLevels.indexOf(city.crime) + 1;
            
            let magicIndex = Math.floor(Math.random() * magicLevels.length);
            if (city.government === "Mageocracy" || city.government === "Mage-touched") {
                magicIndex = Math.max(magicIndex, magicLevels.indexOf("Widespread")); // Ensure high magic
            }
            city.magic = magicLevels[magicIndex];
            city.magicValue = magicIndex + 1;
            
            // --- Organizations & Factions ---
            city.majorFaction = getRandom(factions);
            city.guilds = generateRandomSelection(guilds);
            city.secretSocieties = generateRandomSelection(secretSocieties);
            city.criminalOrgs = generateRandomSelection(criminalOrganizations);
            
            // --- Districts & Locations ---
            city.districts = generateDistricts();
            city.taverns = generateRandomSelection(tavernNames);
            city.shops = generateRandomSelection(shopNames);
            city.landmarks = generateRandomSelection(landmarks);
            city.magicalLocations = generateRandomSelection(magicalLocations);
            
            // --- NPCs ---
            city.npcs = Array.from({ length: Math.floor(Math.random() * 3) + 3 }, generateNPC);
            
            // --- Local Life & Problems ---
            city.festival = getRandom(festivals);
            city.tradition = getRandom(traditions);
            city.cuisine = generateRandomSelection(cuisines, 1, 3);
            city.majorThreat = getRandom(threats);
            city.politicalIntrigue = getRandom(politicalIntrigues);
            city.rumors = generateRandomSelection(rumors, 1, 3);
            city.quest = getRandom(quests);

            // --- NEW SECTIONS ---
            city.historyEvent = getRandom(cityHistoryEvents);
            city.heraldry = `A ${getRandom(heraldrySymbols)} on a field of ${getRandom(heraldryColors)}.`;
            city.atmosphere = getRandom(cityAtmospheres);
            const law = getRandom(notableLaws);
            city.notableLaw = `${law.law} The punishment is ${law.punishment}`;
            
            return city;
        }
        
        // --- DISPLAY LOGIC ---
        
        function displayCity(city) {
            currentCity = city; // Store for copy function
            const get = (id) => document.getElementById(id);

            // Animate cards in
            const cards = document.querySelectorAll('.glass-card');
            cards.forEach(card => {
                card.style.opacity = 0;
                card.style.transform = 'translateY(20px)';
            });
            setTimeout(() => {
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${index * 75}ms`;
                    card.classList.add('animate-card-fade-in');
                });
            }, 10);


            // Header
            get('cityName').textContent = city.name;
            get('cityTagline').textContent = city.tagline;
            get('cityDescription').textContent = city.description;
            
            // Overview
            get('population').textContent = city.population;
            get('citySize').textContent = city.size;
            get('density').textContent = city.density;
            get('location').textContent = city.location;
            get('government').textContent = city.government;
            get('languages').textContent = city.languages;
            
            // Demographics
            const raceDemographics = get('raceDemographics');
            raceDemographics.innerHTML = '';
            city.racePercentages.forEach((percent, i) => {
                if (percent > 0) {
                    raceDemographics.innerHTML += `
                        <div class="text-sm">
                            <div class="flex justify-between mb-1">
                                <span class="font-semibold text-gray-300">${races[i].name}</span>
                                <span class="text-gray-400">${percent}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill ${races[i].color}" style="width: ${percent}%"></div>
                            </div>
                        </div>
                    `;
                }
            });
            
            // Economy
            get('industries').textContent = city.industries;
            get('exports').textContent = city.exports;
            get('tradePartners').textContent = city.tradePartners;
            get('wealth').textContent = city.wealth;
            get('wealthBar').style.width = `${(city.wealthValue / wealthLevels.length) * 100}%`;
            
            // Architecture & Geography
            get('architectureStyle').textContent = city.architectureStyle;
            get('architectureFeatures').textContent = city.architectureFeatures;
            get('buildingMaterials').textContent = city.buildingMaterials;
            get('fortifications').textContent = city.fortifications;
            get('terrain').textContent = city.terrain;
            get('climate').textContent = city.climate;
            get('waterSource').textContent = city.waterSource;
            get('elevation').textContent = city.elevation;
            
            // Culture
            get('popularClasses').textContent = city.popularClasses;
            get('religions').textContent = city.religions;
            get('crime').textContent = city.crime;
            get('crimeBar').style.width = `${(city.crimeValue / crimeLevels.length) * 100}%`;
            get('magic').textContent = city.magic;
            get('magicBar').style.width = `${(city.magicValue / magicLevels.length) * 100}%`;
            
            // Factions & Guilds
            get('majorFaction').textContent = city.majorFaction;
            get('guilds').textContent = city.guilds;
            get('secretSocieties').textContent = city.secretSocieties;
            get('criminalOrgs').textContent = city.criminalOrgs;
            
            // Districts
            const districtsList = get('districtsList');
            districtsList.innerHTML = '';
            city.districts.forEach(d => {
                districtsList.innerHTML += `
                    <div>
                        <span class="district-badge ${d.color}">${d.type}</span>
                        <p class="text-gray-400 text-xs mt-1">${d.description}</p>
                    </div>
                `;
            });
            
            // Locations
            get('taverns').textContent = city.taverns;
            get('shops').textContent = city.shops;
            get('landmarks').textContent = city.landmarks;
            get('magicalLocations').textContent = city.magicalLocations;
            
            // NPCs
            const npcList = get('npcList');
            npcList.innerHTML = '';
            city.npcs.forEach(npc => {
                npcList.innerHTML += `
                    <div class="flex items-center p-3 bg-black bg-opacity-20 rounded-lg gap-4">
                        <div class="npc-avatar ${npc.avatarColor}">${npc.avatarInitial}</div>
                        <div>
                            <div class="font-bold text-white">${npc.name}</div>
                            <div class="text-sm font-medium text-gray-300">${npc.occupation}</div>
                            <div class="text-xs text-gray-400">${npc.race} - <i class="text-gray-500">${npc.personality}</i></div>
                        </div>
                    </div>
                `;
            });
            
            // Local Life
            get('festival').textContent = city.festival;
            get('tradition').textContent = city.tradition;
            get('cuisine').textContent = city.cuisine;
            
            // Plot Hooks
            get('majorThreat').textContent = city.majorThreat;
            get('politicalIntrigue').textContent = city.politicalIntrigue;
            get('rumors').textContent = city.rumors;
            get('quest').textContent = city.quest;

            // New Sections
            get('historyEvent').textContent = city.historyEvent;
            get('heraldry').textContent = city.heraldry;
            get('atmosphere').textContent = city.atmosphere;
            get('notableLaw').textContent = city.notableLaw;
            
            get('cityDisplay').classList.remove('hidden');
        }

        function formatForClipboard(city) {
            let text = `# ${city.name}\n`;
            text += `*${city.tagline}*\n\n`;
            text += `## Description\n${city.description}\n\n`;
            
            text += `## Overview\n`;
            text += `- **Population:** ${city.population} (${city.size})\n`;
            text += `- **Location:** ${city.location}\n`;
            text += `- **Government:** ${city.government}\n`;
            text += `- **Atmosphere:** ${city.atmosphere}\n\n`;

            text += `## Demographics\n`;
            city.racePercentages.forEach((p, i) => {
                if (p > 0) text += `- **${races[i].name}:** ${p}%\n`;
            });
            text += `\n`;

            text += `## Society & Culture\n`;
            text += `- **Wealth:** ${city.wealth}\n`;
            text += `- **Crime:** ${city.crime}\n`;
            text += `- **Magic:** ${city.magic}\n`;
            text += `- **Religions:** ${city.religions}\n\n`;

            text += `## Districts\n`;
            city.districts.forEach(d => text += `- **${d.type}:** ${d.description}\n`);
            text += `\n`;

            text += `## Notable NPCs\n`;
            city.npcs.forEach(npc => text += `- **${npc.name}:** A ${npc.personality} ${npc.race} ${npc.occupation}.\n`);
            text += `\n`;

            text += `## Plot Hooks\n`;
            text += `- **Major Threat:** ${city.majorThreat}\n`;
            text += `- **Political Intrigue:** ${city.politicalIntrigue}\n`;
            text += `- **Rumors:** ${city.rumors}\n`;
            text += `- **Quest:** ${city.quest}\n`;

            return text;
        }
        
        // --- EVENT LISTENERS ---
        
        document.getElementById('generateBtn').addEventListener('click', () => {
            const btn = document.getElementById('generateBtn');
            const btnText = document.getElementById('generateBtnText');
            const spinner = document.getElementById('spinner');

            btn.disabled = true;
            btnText.textContent = 'Conjuring...';
            spinner.classList.remove('hidden');

            // Short delay to allow UI to update and feel responsive
            setTimeout(() => {
                displayCity(generateCity());
                document.getElementById('cityDisplay').scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                btn.disabled = false;
                btnText.textContent = 'Generate New City';
                spinner.classList.add('hidden');
            }, 300);
        });

        document.getElementById('copyBtn').addEventListener('click', () => {
            if (!currentCity.name) return;

            const textToCopy = formatForClipboard(currentCity);
            navigator.clipboard.writeText(textToCopy).then(() => {
                const btnText = document.getElementById('copyBtnText');
                const originalText = btnText.textContent;
                btnText.textContent = 'Copied!';
                setTimeout(() => {
                    btnText.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        });
        
        // Generate a city on initial load
        window.addEventListener('load', () => {
            displayCity(generateCity());
        });
    </script>
</body>
</html>