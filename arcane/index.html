<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arcane Artifact Generator</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸª„</text></svg>">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
  <style>
    /* Base Styles */
    body {
      background-color: #f5f0e1;
      background-image: url('https://i.imgur.com/B1kEKpW.png');
      background-repeat: repeat;
      background-position: 0 0;
      font-family: 'Times New Roman', serif;
      color: #8B4513;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden; /* Prevent horizontal scroll */
      animation: scrollBackground 60s linear infinite;
    }
    @keyframes scrollBackground {
      from { background-position: 0 0; }
      to { background-position: 1000px 0; }
    }
    h1 {
      margin: 20px 0;
      font-size: 2.5rem;
      text-align: center;
      color: #8B4513;
    }
    .options {
      margin: 10px 0;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .options label {
      margin-right: 5px;
    }
    .options select {
      padding: 6px 10px;
      border-radius: 5px;
      border: 1px solid #8B4513;
      font-size: 0.95rem;
      background-color: #f5f0e1;
      color: #8B4513;
    }
    button {
      background-color: #f5f0e1;
      color: #8B4513;
      border: 1px solid #8B4513;
      border-radius: 5px;
      padding: 12px 24px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      margin: 10px;
    }
    button:hover {
      background-color: #e0d9c5;
      transform: scale(1.02);
    }
    /* Artifact Card Styling */
    .artifact-card {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin: 20px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 2px solid #8B4513;
    }
    .artifact-card:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }
    .artifact-card h2 {
      margin-top: 0;
      font-size: 1.75rem;
      color: #8B4513;
      border-bottom: 1px solid #8B4513;
      padding-bottom: 5px;
    }
    .artifact-card p {
      margin: 10px 0;
      line-height: 1.4;
      text-align: left;
    }
    .color-box {
      display: inline-block;
      width: 16px;
      height: 16px;
      vertical-align: middle;
      margin-right: 5px;
      border-radius: 3px;
      border: 1px solid #000;
    }
    .icon {
      margin-right: 8px;
      color: #8B4513;
    }
    /* Copy button styling */
    .copy-btn {
      background-color: #f5f0e1;
      color: #8B4513;
      border: 1px solid #8B4513;
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 0.9rem;
      transition: background-color 0.3s ease, transform 0.2s ease;
      border-radius: 5px;
      margin-left: 5px;
    }
    .copy-btn:hover {
      background-color: #e0d9c5;
      transform: scale(1.02);
    }
    /* Responsive adjustments */
    @media (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
      }
      .artifact-card h2 {
        font-size: 1.5rem;
      }
      button {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
      .copy-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
      }
    }
    .enhancement-text {
      color: darkgreen;
      font-weight: bold;
    }
    .disadvantage-text {
      color: darkred;
      font-style: italic;
    }
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #f5f0e1;
      color: #8B4513;
      border: 1px solid #8B4513;
      padding: 15px;
      border-radius: 5px;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      transform: translateY(-20px);
      z-index: 1000;
    }
    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }
    .artifact-section {
      margin-bottom: 15px;
      border-bottom: 1px solid #8B4513;
      padding-bottom: 5px;
    }
    .artifact-section:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    .artifact-section h3 {
      font-size: 1.2rem;
      color: #8B4513;
      margin-bottom: 5px;
    }
    .spell-charges {
      margin-left: 20px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1><i class="fas fa-magic icon"></i>Arcane Artifact Generator</h1>
  
  <div class="options">
    <div>
      <label for="artifactTypeSelect">Artifact Type:</label>
      <select id="artifactTypeSelect">
        <option value="Any">Any</option>
        <option value="Staff">Staff</option>
        <option value="Wand">Wand</option>
      </select>
    </div>
    <div>
      <label for="raritySelect">Rarity:</label>
      <select id="raritySelect">
        <option value="Any">Any</option>
        <option value="Uncommon">Uncommon</option>
        <option value="Rare">Rare</option>
        <option value="Very Rare">Very Rare</option>
        <option value="Legendary">Legendary</option>
      </select>
    </div>
  </div>
  
  <button id="generateBtn"><i class="fas fa-dice icon"></i>Generate Artifact</button>
  <button class="copy-btn" id="copyBtn"><i class="fas fa-copy icon"></i></button>
  <div class="artifact-card" id="artifactDisplay">
    <p>Click the button to conjure a wondrous, weird, and wild arcane artifact!</p>
  </div>
  
  <div id="toastContainer"></div>
  
  <script>
    /* --- Expanded Data Arrays --- */
    
// Adjectives
const adjectives = [
  // Mystical and Arcane
  "Arcane", "Mystic", "Ethereal", "Celestial", "Shadowy", "Ancient", "Enchanted", "Runed",
  "Whispering", "Luminous", "Resonant", "Harmonious", "Astral", "Eldritch", "Prismatic", 
  "Veiled", "Chaotic", "Boundless", "Ephemeral", "Forbidden", "Tempestuous", "Shimmering",
  
  // Elemental
  "Fiery", "Frozen", "Stormbound", "Thundering", "Molten", "Frosted", "Glistening", "Radiant", 
  "Gale-Touched", "Seismic", "Aqueous", "Ignited", "Crystalline", "Torrential", "Lava-Born",
  
  // Cosmic and Celestial
  "Stellar", "Galactic", "Lunar", "Solar", "Nebulous", "Void-Touched", "Starry", "Quantum",
  "Cosmic", "Infinite", "Sublime", "Ecliptic", "Twilit", "Supernal", "Astronomical", 
  "Auroral", "Heavenly", "Dawning", "Orbital", "Cometary", "Zephyrous",
  
  // Nature-Inspired
  "Verdant", "Floral", "Sylvan", "Thorned", "Blooming", "Petrified", "Wild", "Fungal", 
  "Rooted", "Sprawling", "Canopy", "Bramble", "Dew-Kissed", "Amber", "Emerald",
  
  // Unique and Flavorful
  "Runic", "Warped", "Vorpal", "Obsidian", "Gleaming", "Twinkling", "Auric", "Crackling",
  "Feral", "Phantasmal", "Spectral", "Dreadful", "Infernal", "Blighted", "Sealed", "Forgotten",
  "Mirrorlike", "Fractured", "Haunted", "Twisting", "Echoing", "Draconic", "Soulbound", 
  "Phoenix-Touched", "Wisping", "Dissonant", "Cursed", "Flickering", "Radiating", "Tempestuous",
  
  // Funny and Quirky
  "Soggy", "Awkward", "Gassy", "Clumsy", "Quacking", "Snazzy", "Dorky", "Jiggling", "Funky",
  "Cheesy", "Spicy", "Wobbly", "Flatulent", "Overcaffeinated", "Itchy", "Goopy", "Bedazzled",
  "Slippery", "Sassy", "Blindingly Glittery", "Lumpy", "Mediocre", "Confused", "Unhinged",
  "Perpetually Damp", "Ridiculously Bright", "Tacky", "Overdramatic", "Overly Sincere",
  "Chronically Embarrassed", "Super Annoying", "Excessively Chatty", "Slightly Crooked",
  "Suspiciously Smooth", "Questionably Sticky", "Uncomfortably Warm", "Unintentionally Sparkly",
  "Spastically Vibrating", "Smelly", "Overly Theatrical", "Mildly Cursed", "Laughably Useless", 

  // New
  "Short", "Tall", "Abyssal", "Unusually And Exceedingly Peculiar, And Altogether Quite Impossible To Describe",
  "Blode", "Wicked", "Good News Bearing", "First", "Second", "Third", "Last", "Crooked", "Curvy",
  "Loopy", "Abstract",

  // Alignments
  "Lawfully Good", "Neutrally Good", "Chaotically Good", "Lawfully Neutral", "Truly Neutral",
  "Chaotically Good", "Lawfully Evil", "Neutrally Evil", "Chaotically Evil",
];

    
    // Artifact types
    const artifactTypes = ["Staff", "Wand"];
    
    // Artifact type icons mapping
    const artifactIcons = {
      "Staff": "fa-staff",
      "Wand": "fa-magic-wand-sparkles"
    };
    const defaultIcon = "fa-gem";
    
// Materials
const materials = [
  // Common Materials
  "Oak", "Ebony", "Rosewood", "Ashwood", "Birch", "Maple", "Willow", "Pine", "Mahogany", "Yew",
  
  // Precious Metals
  "Silver", "Gold", "Electrum", "Platinum", "Mithril", "Adamantine", "Copper", "Bronze", "Orichalcum", "Quicksilver",
  
  // Gemstone-Based
  "Crystal", "Sapphire", "Ruby", "Emerald", "Amethyst", "Topaz", "Moonstone", "Sunstone", "Obsidian", "Jade",
  "Onyx", "Opal", "Peridot", "Garnet", "Aquamarine", "Spinel", "Zircon",
  
  // Mystical/Arcane Materials
  "Starmetal", "Petrified Wood", "Living Wood", "Frozen Tears", "Phoenix Feather", "Unicorn Horn", "Astral Shard",
  "Void Stone", "Dreamweave", "Heartwood", "Soulsteel", "Whisperwood", "Emberglass", "Shadowsilk", "Celestium",
  "Aetherium", "Etherglass", "Bloodstone", "Driftstone", "Duskwood", "Frostwood", "Luminite", "Nethercrystal",
  "Arcane Resin", "Spellglass", "Eclipsium", "Twilight Ore",
  
  // Elemental Materials
  "Flameglass", "Frostgem", "Stormstone", "Thundershard", "Wavewood", "Earthroot", "Cloudstone", "Molten Ore",
  "Ice Quartz", "Volcanic Obsidian", "Lightning Infused Steel", "Smokestone", "Windglass",
  
  // Mythical Creature-Based
  "Dragonbone", "Wyvern Scale", "Chimera Fang", "Basilisk Eye", "Hydra Tooth", "Griffon Feather", "Pegasus Mane",
  "Kraken Inkstone", "Selkie Fur", "Direwolf Claw", "Manticore Spine", "Sphinx Feather", "Phoenix Ash",
  "Shadow Drake Scale", "Unicorn Tail Hair", "Ethereal Wisp", "Celestial Feather",
  
  // Celestial and Planar Materials
  "Starshard", "Lunar Fragment", "Solar Core", "Planar Glass", "Feywood", "Infernal Iron", "Abyssal Obsidian",
  "Heavensteel", "Hellsilver", "Ethereal Flame", "Void Crystal", "Astral Thread", "Dreamwood",
  
  // Cursed and Dark Materials
  "Bloodwood", "Witchwood", "Nightmare Resin", "Darksteel", "Cursed Onyx", "Haunted Bone", "Blackened Silver",
  "Necrotic Crystal", "Soulstone", "Shadowglass", "Doomsteel", "Phantom Thread", "Ebonwood",
  
  // Exotic and Rare Materials
  "Mirrorstone", "Prismshard", "Auraglass", "Chimerite", "Glimmerwood", "Spiritstone", "Stormglass",
  "Voidroot", "Celestite", "Dawnstone", "Gloamwood", "Radiant Pearl", "Lifeglass", "Dewstone",
  "Fulgurite", "Seastone", "Veilroot", "Duskshard", "Starflame", "Frostflame", "Wispwood", "Sylvansteel",

  // Funny and Unconventional Materials
  "Paper Mache", "Cheesecloth", "Duct Tape", "Cardboard", "Bubble Wrap", "Styrofoam", "Rubber", "Old Shoe Leather",
  "Goblin Earwax", "Unicorn Farts", "Chicken Bone", "Recycled Goblin Toenails", "Melted Candles", "Beeswax",
  "Sock Fabric", "Mossy Pebbles", "Belly Button Lint", "Petrified Bread", "Glitter Glue", "Toenail Clippings",
  "Worn-Out Sandals", "Discarded Toothpicks", "Grandma's Quilt Pieces", "Expired Jelly Beans", "Marshmallow Core",
  "Soggy Noodles", "Licorice Root", "Cracked Clay", "Broken Teacups", "Pineapple Husk", "Plastic Fork Shards",
  "Tinfoil", "Melted Crayons", "Frog Slime", "Snail Shells", "Rusty Nails", "Dust Bunnies", "Leftover Pasta",
  "Potato Peels", "Burnt Toast", "Fish Scales", "Cat Hairballs", "Melted Ice Cream", "Rotten Tomatoes",
  "Caramelized Sugar", "Spiderwebs", "Dragon Dandruff", "Soap Bubbles", "Melted Soap", "Cursed Bathwater"
];


    
    // Spell lists
    const spellLists = {
      "Abjuration": ["Shield", "Mage Armor", "Counterspell", "Dispel Magic", "Antimagic Field", "Absorb Elements", "Protection from Evil and Good", "Warding Bond", "Magic Circle", "Globe of Invulnerability"],
      "Conjuration": ["Summon Familiar", "Misty Step", "Teleportation Circle", "Conjure Elemental", "Gate", "Healing Word", "Spiritual Weapon", "Conjure Animals", "Dimension Door", "Teleport"],
      "Divination": ["Detect Magic", "Clairvoyance", "Scrying", "Foresight", "True Seeing", "Identify", "See Invisibility", "Locate Object", "Legend Lore", "Contact Other Plane"],
      "Enchantment": ["Charm Person", "Suggestion", "Hypnotic Pattern", "Dominate Person", "Mass Suggestion", "Sleep", "Tasha's Hideous Laughter", "Crown of Madness", "Geas", "Modify Memory"],
      "Evocation": ["Magic Missile", "Fireball", "Lightning Bolt", "Cone of Cold", "Meteor Swarm", "Thunderwave", "Shatter", "Scorching Ray", "Wall of Fire", "Chain Lightning"],
      "Illusion": ["Minor Illusion", "Invisibility", "Major Image", "Mirage Arcane", "Project Image", "Silent Image", "Disguise Self", "Blur", "Hallucinatory Terrain", "Mislead"],
      "Necromancy": ["Chill Touch", "Animate Dead", "Vampiric Touch", "Circle of Death", "Finger of Death", "False Life", "Ray of Enfeeblement", "Bestow Curse", "Blight", "Danse Macabre"],
      "Transmutation": ["Alter Self", "Fly", "Polymorph", "Shapechange", "Time Stop", "Expeditious Retreat", "Levitate", "Haste", "Stone Shape", "Control Weather"]
    };
    
    // Spell conditions
    const spellConditions = [
      "with a whisper", "while touching the ground", "under moonlight", "when blood is spilled",
      "after a moment of meditation", "while holding a gem", "when a secret is spoken",
      "when a song is sung", "when a sacrifice is made", "when a promise is broken",
      "when a tear is shed", "when a heart is full", "when a mind is clear", "when a soul is lost",
      "when a star is seen", "when a shadow falls", "when a flame dances", "when a storm rages"
    ];
    
    // Spell enhancements (more specific and balanced)
    const spellEnhancements = [
      { name: "Enhanced Ability", type: "beneficial", description: "While attuned to the Artifact, one of your ability scores (DMâ€™s choice) increases by 2, to a maximum of 24." },
      { name: "Regeneration", type: "beneficial", description: "While attuned to the Artifact, you regain 1d6 Hit Points at the start of each of your turns if you have at least 1 Hit Point." },
      { name: "Extra Force Damage", type: "offensive", description: "When you hit with an attack roll while attuned to the Artifact, the target takes an extra 1d6 Force damage." },
      { name: "Increased Speed", type: "beneficial", description: "While youâ€™re attuned to the Artifact, your Speed increases by 10 feet." },
      { name: "Spell (Level 4)", type: "beneficial", description: "You can cast one level 4 spell (chosen by the DM) from the Artifact. After you cast it, roll 1d6. On 1â€“5, you canâ€™t cast it again this way until the next dawn." },
      { name: "Immunity to Certain Conditions", type: "beneficial", description: "While attuned, you have immunity to the Blinded, Deafened, Petrified, and Stunned conditions." },
      { name: "Skill Proficiency", type: "beneficial", description: "While attuned to the Artifact, you gain proficiency in one skill of the DMâ€™s choice." },
      { name: "Immunity to Poisoned", type: "beneficial", description: "While attuned, you have immunity to the Poisoned condition." },
      { name: "Immunity to Charm & Fear", type: "beneficial", description: "You have immunity to being Charmed and Frightened while attuned." },
      { name: "Damage Resistance", type: "beneficial", description: "While attuned, you have Resistance to one damage type (DMâ€™s choice)." },
      { name: "Cantrip Casting", type: "beneficial", description: "You can cast one cantrip (chosen by the DM) from the Artifact while attuned." },
        { name: "Spell (Level 1)", type: "beneficial", description: "You can cast one level 1 spell (chosen by the DM). After casting, roll 1d6. On 1â€“5, you canâ€™t cast it again until the next dawn." },
      { name: "+1 Armor Class", type: "beneficial", description: "While attuned, you gain a +1 bonus to AC." },
        { name: "Shielding Aura", type: "defensive", description: "Gain a +1 bonus to AC while holding the staff." },
        { name: "Warding Light", type: "defensive", description: "Cast *shield* once per short rest without expending a spell slot." },
        { name: "Deflection Ward", type: "defensive", description: "Gain resistance to one damage type (e.g., fire, cold) while holding the staff." },
        { name: "Magic Nullifier", type: "defensive", description: "Once per long rest, you can end a magical effect targeting you or an ally within 30 feet." },
        { name: "Energy Barrier", type: "defensive", description: "When reduced to 0 HP, you can use the staff to cast *sanctuary* on yourself once per long rest." },
        { name: "Protective Ward", type: "defensive", description: "You gain temporary hit points equal to your spellcasting modifier when you cast a spell of 1st level or higher." },
        { name: "Flickering Defense", type: "defensive", description: "As a reaction, you can impose disadvantage on one attack against you. Usable once per short rest." },
        { name: "Ethereal Shield", type: "defensive", description: "Gain resistance to force damage while holding the staff." },
        { name: "Soul Ward", type: "defensive", description: "Once per long rest, negate the effects of a critical hit targeting you." },
        { name: "Aura of Protection", type: "defensive", description: "Allies within 10 feet of you gain a +1 bonus to AC while you hold the staff." },
        { name: "Sanctuary Aura", type: "defensive", description: "When you are reduced to 0 HP, cast *sanctuary* on yourself automatically." },
        { name: "Rebounding Ward", type: "defensive", description: "When you succeed on a saving throw, the attacker takes 1d6 psychic damage." },
        { name: "Elemental Ward", type: "defensive", description: "Choose one damage type (acid, cold, fire, lightning, or thunder). You gain resistance to it while holding the staff." },
        { name: "Mirror Defense", type: "defensive", description: "Once per short rest, cast *mirror image* on yourself without using a spell slot." },
        { name: "Temporal Shield", type: "defensive", description: "As a reaction, slow down time for yourself, giving you a +2 bonus to AC until the end of your next turn." },
        { name: "Forceful Strike", type: "offensive", description: "Add 1d6 force damage to melee attacks made with the staff." },
        { name: "Fire Surge", type: "offensive", description: "Once per short rest, cast *fireball* using a 3rd-level spell slot without expending charges." },
        { name: "Thunderous Blow", type: "offensive", description: "On a melee hit, you can knock a target back 10 feet. Usable a number of times equal to your proficiency bonus." },
        { name: "Vampiric Touch", type: "offensive", description: "Once per short rest, you can deal necrotic damage equal to 2d8 and heal for half the damage dealt." },
        { name: "Frostbite", type: "offensive", description: "Add 1d6 cold damage to spells you cast that deal damage." },
        { name: "Arcane Riposte", type: "offensive", description: "When a creature misses you with a melee attack, you can deal 2d6 lightning damage as a reaction." },
        { name: "Corrupting Strike", type: "offensive", description: "Melee hits with the staff deal an additional 1d6 necrotic damage." },
        { name: "Overwhelming Strike", type: "offensive", description: "Once per short rest, add 2d6 radiant damage to a melee attack made with the staff." },
        { name: "Vortex Blast", type: "offensive", description: "Melee hits create a 5-foot-radius shockwave, dealing 1d6 force damage to all creatures around the target." },
        { name: "Ignition", type: "offensive", description: "When you deal fire damage, you can set the target ablaze, dealing 1d6 fire damage at the start of their turn for 1 minute (DC 15 to extinguish)." },
        { name: "Arcane Impact", type: "offensive", description: "If you cast a spell that deals force damage, you can knock the target back 10 feet." },
        { name: "Chain Arcana", type: "offensive", description: "Once per short rest, when you deal damage to a creature, you can make the damage jump to a second target within 10 feet." },
        { name: "Sundering Strike", type: "offensive", description: "Critical hits with the staff reduce the target's AC by 1 until the end of their next turn." },
        { name: "Radiant Blade", type: "offensive", description: "The staff can transform into a radiant blade, dealing 2d8 radiant damage on a melee hit. Lasts 1 minute, once per long rest." },
        { name: "Piercing Arcana", type: "offensive", description: "Spells you cast ignore resistance to the damage type." },
        { name: "Spell Reservoir", type: "utility", description: "Store a single spell of 3rd level or lower for later use." },
        { name: "Lightbringer", type: "utility", description: "Cast *light* at will." },
        { name: "Shapechangerâ€™s Aid", type: "utility", description: "While concentrating on *polymorph*, you gain advantage on concentration saving throws." },
        { name: "Healing Pulse", type: "utility", description: "Once per short rest, heal 2d8 HP to all creatures in a 10-foot radius." },
        { name: "Mageâ€™s Storage", type: "utility", description: "The staff contains an extradimensional space to store one small object." },
        { name: "Hidden Passage", type: "utility", description: "Cast *pass without trace* once per day without expending a spell slot." },
        { name: "Arcane Compass", type: "utility", description: "The staff points toward the nearest source of magic or magical item within 100 feet." },
        { name: "Echoing Voice", type: "utility", description: "Cast *message* at will, requiring no components." },
        { name: "Dimensional Anchor", type: "utility", description: "Cast *misty step* once per short rest without using a spell slot." },
        { name: "Spell Capture", type: "utility", description: "Once per long rest, absorb an incoming spell of 3rd level or lower and store it for later use." },
        { name: "Binding Tether", type: "utility", description: "Cast *hold person* once per short rest using the staff." },
        { name: "Planar Link", type: "utility", description: "You can cast *plane shift* once per long rest, but only to a specific predetermined location." },
        { name: "Illusory Veil", type: "utility", description: "Create an illusion of yourself (as *mirror image* but only one duplicate) once per short rest." },
        { name: "Darkvision Enhancer", type: "utility", description: "You can see through magical darkness while holding the staff." },
        { name: "Levitation Control", type: "utility", description: "Cast *levitate* at will." },
        { name: "Arcane Mapping", type: "utility", description: "While holding the staff, you can sense the layout of an area within 100 feet as if using *clairvoyance*." },
        { name: "Battle Focus", type: "supportive", description: "Gain advantage on concentration checks while holding the staff." },
        { name: "Mind Shield", type: "supportive", description: "Gain resistance to psychic damage and immunity to being charmed." },
        { name: "Empowered Healing", type: "supportive", description: "Healing spells cast while holding the staff restore an additional 1d8 HP." },
        { name: "Quickened Spells", type: "supportive", description: "You can cast one cantrip as a bonus action, usable once per short rest." },
        { name: "Friendâ€™s Beacon", type: "supportive", description: "Allies within 10 feet gain a +1 bonus to saving throws." },
        { name: "Aura of Courage", type: "supportive", description: "Allies within 10 feet canâ€™t be frightened." },
        { name: "Revitalizing Arcana", type: "supportive", description: "Regain one expended spell slot of 3rd level or lower once per long rest." },
        { name: "Stormcaller", type: "elemental", description: "Cast *call lightning* once per long rest." },
        { name: "Flamekeeper", type: "elemental", description: "Cast *scorching ray* at 3rd level once per short rest." },
        { name: "Wavebinder", type: "elemental", description: "Cast *wall of water* once per short rest." },
        { name: "Earthshaker", type: "elemental", description: "Create difficult terrain in a 20-foot radius once per short rest." },
        { name: "Airborne Glide", type: "elemental", description: "Gain the effects of *feather fall* while holding the staff." },
        { name: "Ice Cage", type: "elemental", description: "Cast *snilloc's snowball swarm* once per long rest." },
        { name: "Living Wood", type: "miscellaneous", description: "The staff regrows if broken, regaining all properties after a week." },
        { name: "Phoenixâ€™s Spirit", type: "miscellaneous", description: "Once per long rest, regain 10 HP if you are reduced to 0 HP." },
        { name: "Telepathic Connection", type: "miscellaneous", description: "Gain telepathy with creatures within 30 feet." },
        { name: "Temporal Shift", type: "miscellaneous", description: "Cast *haste* on yourself once per long rest." },
        { name: "Arcane Explosion", type: "miscellaneous", description: "When reduced to 0 HP, the staff releases a 10-foot-radius explosion dealing 2d6 force damage to all creatures within range." }
    ];
    
    // Disadvantages
    const disadvantages = [
      { name: "Attunement Shock", type: "detrimental", description: "Each time you become attuned, succeed on a DC 10 Constitution saving throw or die. If you die, you become a Wight under the DMâ€™s control." },
      { name: "Potion Diffusion", type: "detrimental", description: "The Artifact diffuses potions within 10 feet, rendering them nonmagical." },
      { name: "Scroll Erasure", type: "detrimental", description: "The Artifact erases scrolls within 10 feet, rendering them nonmagical." },
      { name: "Creature Hostility", type: "detrimental", description: "A particular non-Humanoid creature type (DMâ€™s choice) is always Hostile toward you while youâ€™re attuned." },
      { name: "Universal Vulnerability", type: "detrimental", description: "While attuned, you have Vulnerability to all damage." },
      { name: "Imprisoned Slaad", type: "detrimental", description: "A Death Slaad is imprisoned in the Artifact. Each attunement, thereâ€™s a 10% chance it escapes and attacks you." },
      { name: "No Healing", type: "detrimental", description: "You canâ€™t spend Hit Point Dice or regain Hit Points while attuned." },
      { name: "Exclusive Attunement", type: "detrimental", description: "You canâ€™t attune to other magic items while attuned. Attunement to other items ends immediately." },
      { name: "Ability Score Reduction", type: "detrimental", description: "When you become attuned, a random ability score is reduced by 2 (min 3). Greater Restoration restores it." },
      { name: "Attunement Psychic Damage", type: "detrimental", description: "Upon attuning, take 8d10 Psychic damage." },
      { name: "Artifact Quest", type: "detrimental", description: "The first time you attune, the Artifact gives you a DM-determined quest. You canâ€™t use its properties until you complete it." },
      { name: "Divine Attention", type: "detrimental", description: "Each attunement, there's a 10% chance a godâ€™s avatar (Empyrean) appears to claim the Artifact. Once it does, it vanishes." },
      { name: "Disadvantage (Str & Con)", type: "detrimental", description: "You have Disadvantage on ability checks or saving throws using Strength or Constitution." },
      { name: "Disadvantage (Int, Wis, Cha)", type: "detrimental", description: "You have Disadvantage on saving throws using Intelligence, Wisdom, and Charisma." },
      { name: "Poison Vulnerability", type: "detrimental", description: "While attuned, you have Vulnerability to Poison damage." },
      { name: "Distance Blindness", type: "detrimental", description: "You are Blinded when youâ€™re more than 10 feet from the Artifact." },
      { name: "Distance Deafness", type: "detrimental", description: "You are Deafened when youâ€™re more than 10 feet from the Artifact." },
      { name: "No Sense of Smell", type: "detrimental", description: "While attuned, you lose all sense of smell." },
      { name: "Altered Appearance", type: "detrimental", description: "While attuned, your appearance changes as the DM decides." },
      { name: "Foul Odor", type: "detrimental", description: "You emit a sour stench noticeable up to 10 feet away." },
      { name: "Value Reduction", type: "detrimental", description: "Touching a nonmagical gem/object halves its value. Each item is affected only once." },
      { name: "Holy Water Destruction", type: "detrimental", description: "All Holy Water within 10 feet of you is destroyed while youâ€™re attuned." },
      { name: "Extinguish Flames", type: "detrimental", description: "Nonmagical flames are extinguished within 30 feet of you." },
      { name: "Rest Denial", type: "detrimental", description: "No other creatures can take Short or Long Rests within 300 feet of you." },
      { name: "Plant Killer", type: "detrimental", description: "You kill any nonmagical vegetation you touch that isnâ€™t a creature." },
      { name: "Beast Hostility", type: "detrimental", description: "Beasts within 30 feet of you (CR 6 or lower) are Hostile toward you." },
        { name: "Fragile Construction", type: "defensive", description: "If the staff takes more than 10 points of damage in one turn, it loses one enhancement until repaired." },
        { name: "Draining Aura", type: "defensive", description: "While holding the staff, your maximum HP is reduced by 5." },
        { name: "Vulnerability", type: "defensive", description: "While holding the staff, you gain vulnerability to one damage type (e.g., fire, cold)." },
        { name: "Arcane Feedback", type: "defensive", description: "On a failed concentration check, take 1d6 psychic damage." },
        { name: "Cursed Warding", type: "defensive", description: "The staffâ€™s protective enhancements only work against creatures of a specific type (e.g., undead, fiends)." },
        { name: "Arcane Misfire", type: "offensive", description: "On a natural 1 for a spell attack, the spell backfires, dealing 1d6 damage of its type to you." },
        { name: "Unstable Power", type: "offensive", description: "Whenever you cast a spell using the staff, roll a d20. On a 1, the staff expends an extra charge." },
        { name: "Chaotic Magic", type: "offensive", description: "Spells cast with the staff have a 5% chance to create a random wild magic effect." },
        { name: "Tiring Strike", type: "offensive", description: "Each melee attack with the staff imposes a cumulative -1 penalty to your next attack roll until the end of your turn." },
        { name: "Echoing Force", type: "offensive", description: "When you deal damage with the staff, you take 1d4 force damage." },
        { name: "Obnoxious Glow", type: "utility", description: "The staff emits a bright, uncontrollable light, making it impossible to hide while holding it." },
        { name: "Whispering Curse", type: "utility", description: "The staff constantly whispers, making stealth and concentration checks more difficult (disadvantage on such rolls)." },
        { name: "Unpredictable Direction", type: "utility", description: "The *Arcane Compass* enhancement occasionally points to a useless or dangerous source of magic." },
        { name: "Plane-Bound", type: "utility", description: "The staffâ€™s utility effects (e.g., teleportation) only work on its plane of origin." },
        { name: "Exhausting Magic", type: "utility", description: "After using a utility spell from the staff, you gain one level of exhaustion." },
        { name: "Selfish Aura", type: "supportive", description: "Supportive effects of the staff only apply to the wielder, not allies." },
        { name: "Weakened Bonds", type: "supportive", description: "Allies within 10 feet of the staff take a -1 penalty to saving throws while the staff is active." },
        { name: "Jealous Power", type: "supportive", description: "The staffâ€™s benefits deactivate if you are attuned to another magic item." },
        { name: "Compromised Fortitude", type: "supportive", description: "While holding the staff, your Constitution score is reduced by 2." },
        { name: "Unnerving Presence", type: "supportive", description: "Allies feel uneasy around the staff, causing them to have disadvantage on Insight checks." },
        { name: "Reactive Energy", type: "elemental", description: "The staff randomly deals 1d6 damage of its attuned type (e.g., fire, cold) to its wielder when used." },
        { name: "Volatile Element", type: "elemental", description: "If the staff is exposed to an opposing element (e.g., fire for an ice staff), it temporarily loses its properties for 1d4 hours." },
        { name: "Burnout", type: "elemental", description: "After casting a spell of a specific damage type (e.g., fire), you canâ€™t cast spells of that type again until you finish a short rest." },
        { name: "Energy Leak", type: "elemental", description: "You take 1d6 damage of the staffâ€™s elemental type when rolling a natural 1 on an attack or saving throw." },
        { name: "Elemental Overload", type: "elemental", description: "If you deal maximum damage with an elemental spell, the staff inflicts half that damage to you." },
        { name: "Cursed Attunement", type: "miscellaneous", description: "Once attuned, you cannot unattune from the staff unless you cast *remove curse*." },
        { name: "Lingering Shadows", type: "miscellaneous", description: "The staff attracts the attention of extraplanar creatures, who may seek to steal or destroy it." },
        { name: "Doomed Aura", type: "miscellaneous", description: "The staff gives off an ominous presence, causing NPCs to distrust or fear you." },
        { name: "Erratic Power", type: "miscellaneous", description: "Roll a d20 whenever the staff regains charges. On a 1, it regains no charges that day." },
        { name: "Limited Attunement", type: "miscellaneous", description: "The staff can only be attuned to creatures of a specific alignment, race, or class." },
        { name: "Eldritch Bond", type: "miscellaneous", description: "The staff demands a sacrifice (e.g., HP, gold, or a rare item) once per week to maintain its power." },
        { name: "Unstable Glow", type: "miscellaneous", description: "The staff changes size or weight at random intervals, imposing disadvantage on attack rolls or checks involving it." },
        { name: "Tethered Spirit", type: "miscellaneous", description: "A ghostly entity is bound to the staff, occasionally interfering in social interactions (e.g., insulting NPCs or revealing secrets)." },
        { name: "Emotional Drain", type: "flavorful", description: "The staff amplifies emotions, making the wielder prone to fits of rage, despair, or joy." },
        { name: "Phantom Pain", type: "flavorful", description: "Wielding the staff causes faint pain in your hands or arms, imposing disadvantage on Strength-based checks." },
        { name: "Memory Leak", type: "flavorful", description: "Prolonged use of the staff causes you to forget minor details (e.g., names, locations)." },
        { name: "Eerie Whispers", type: "flavorful", description: "The staff occasionally speaks, saying unsettling or cryptic things at inopportune moments." },
        { name: "Overly Vibrant", type: "flavorful", description: "The staffâ€™s colors are too vivid, drawing unwanted attention." },
        { name: "Time Distortion", type: "flavorful", description: "The wielder occasionally perceives time differently, leading to minor confusion in combat." },
        { name: "Animal Aversion", type: "flavorful", description: "Creatures of the natural world avoid the staff, making it difficult to interact with animals." },
        { name: "Animal Magnetism", type: "silly", description: "The staff constantly attracts squirrels, birds, and other small animals, which follow you relentlessly." },
        { name: "Uncontrollable Jingles", type: "silly", description: "The staff emits a faint jingling noise whenever it is moved, making stealth nearly impossible." },
        { name: "Color Shift", type: "silly", description: "The staff randomly changes its color every hour, sometimes clashing horribly with your outfit." },
        { name: "Laughable Power", type: "silly", description: "Casting a spell causes a faint sound of laughter to echo, regardless of the situation." },
        { name: "Sticky Grip", type: "silly", description: "The staff is perpetually sticky, making it unpleasant to hold and causing minor inconveniences." },
        { name: "Ridiculous Smell", type: "silly", description: "The staff emits a strong odor of rotting fruit that cannot be masked or removed." },
        { name: "Uncontrollable Lightshow", type: "silly", description: "Casting a spell creates an over-the-top display of sparkles and flashing lights, drawing attention to you." },
        { name: "Static Cling", type: "silly", description: "The staff causes your clothing and hair to cling uncomfortably to your body." },
        { name: "Riddle Curse", type: "silly", description: "The staff forces you to speak in rhymes or riddles whenever you try to communicate." },
        { name: "Squeaky Casting", type: "silly", description: "Every spell cast produces an obnoxious squeak, like a rubber toy." },
        { name: "Echoed Incantations", type: "moderately annoying", description: "Your voice echoes loudly whenever you cast a spell, alerting everyone nearby." },
        { name: "Heavy Burden", type: "moderately annoying", description: "The staff grows heavier over time, imposing disadvantage on Strength checks and saving throws." },
        { name: "Slippery Surface", type: "moderately annoying", description: "The staff becomes slick and difficult to hold, requiring a DC 12 Dexterity check to avoid dropping it during combat." },
        { name: "Magnetic Attraction", type: "moderately annoying", description: "Metal objects within 10 feet are subtly pulled toward the staff, clanging and clinking annoyingly." },
        { name: "Twitching Energy", type: "moderately annoying", description: "The staff emits random sparks that may set flammable objects ablaze if not handled carefully." },
        { name: "Gluttonous Aura", type: "moderately annoying", description: "The staff causes the wielder and allies within 10 feet to feel constantly hungry." },
        { name: "Anti-Gravity Glitch", type: "moderately annoying", description: "Occasionally, the staff causes small objects (like coins or daggers) to float unpredictably in its vicinity." },
        { name: "Unholy Glow", type: "moderately annoying", description: "The staff glows with an eerie, green light that causes commoners to assume you are evil." },
        { name: "Fickle Magic", type: "moderately annoying", description: "Once per day, the staff refuses to cast any spell you attempt, wasting the action." },
        { name: "Temperamental Blast", type: "moderately annoying", description: "When the staffâ€™s magic is used, thereâ€™s a 10% chance it will target a random creature in range instead of your intended target." },
        { name: "Life Drain", type: "severe", description: "Casting a spell drains 1d4 hit points from the wielder." },
        { name: "Explosive Backlash", type: "severe", description: "On a natural 1, spells cast from the staff explode, dealing half the spellâ€™s damage to the caster." },
        { name: "Constant Whispers", type: "severe", description: "The staff whispers unsettling truths, causing disadvantage on Wisdom (Perception) and Wisdom (Insight) checks." },
        { name: "Energy Leak", type: "severe", description: "The staff emits harmful energy, dealing 1d6 damage to any creature within 5 feet every time it is used." },
        { name: "Unstable Charges", type: "severe", description: "The staff has a 5% chance to lose all remaining charges when a spell is cast." },
        { name: "Volatile Cast", type: "severe", description: "On a natural 1, the staff casts *fireball* centered on you instead of the intended spell." },
        { name: "Shadowâ€™s Grip", type: "severe", description: "The staff slowly corrupts its wielder, reducing Charisma by 1 every week it is used until unattuned." },
        { name: "Parasitic Bond", type: "severe", description: "The staff slowly drains your life force, reducing your maximum hit points by 1d6 every long rest." },
        { name: "Fragmented Reality", type: "severe", description: "Holding the staff causes hallucinations, giving disadvantage on Intelligence saving throws." },
        { name: "Echoed Pain", type: "severe", description: "Whenever you take damage, you feel the pain twice, taking 1d6 additional psychic damage." },
        { name: "Doom Counter", type: "potentially fatal", description: "The staff counts down from 10 every time it is used. At 0, it explodes in a 60-foot-radius sphere, dealing 10d10 force damage to all creatures." },
        { name: "Random Teleportation", type: "potentially fatal", description: "Whenever you cast a spell, roll a d20. On a 1, you are teleported to a random location within 1d100 miles." },
        { name: "Soul Bound", type: "potentially fatal", description: "If the staff is destroyed, the wielder dies instantly." },
        { name: "Reckless Cast", type: "potentially fatal", description: "Every spell cast has a 5% chance of summoning a hostile creature (e.g., a demon, elemental)." },
        { name: "Spell Twist", type: "potentially fatal", description: "On a failed saving throw, the staff reverses its magic, targeting the wielder instead." },
        { name: "Cursed Legacy", type: "potentially fatal", description: "The staff marks its wielder for death, and a powerful enemy is now actively hunting you." },
        { name: "Chaotic Void", type: "potentially fatal", description: "When the staff is used, there is a 10% chance it opens a small portal to another plane, releasing a hostile creature." },
        { name: "Mana Flare", type: "potentially fatal", description: "Casting a spell overloads the wielder, dealing damage equal to twice the spellâ€™s level." },
        { name: "Living Curse", type: "potentially fatal", description: "The staff becomes sentient and tries to possess the wielder, forcing a DC 18 Wisdom saving throw each day or taking control." },
        { name: "Final Strike", type: "potentially fatal", description: "The staff consumes the wielderâ€™s soul upon death, preventing resurrection unless the staff is destroyed." }
    ];
    
    // Expanded quirks
    const quirks = [
      "pulses with arcane energy", "whispers forgotten spells", "reacts to emotions",
      "changes color with the seasons", "feels warm to the touch", "seems to hum a melody",
      "occasionally emits sparks", "reflects nearby magic", "shows visions of the future",
      "feels lighter than it should", "feels heavier than it should", "seems to grow in power",
      "seems to shrink in power", "occasionally vibrates", "occasionally glows",
      "occasionally chills", "occasionally burns", "occasionally whispers", "occasionally sings", "is Blissful: You feel fortunate and optimistic about what the future holds. Butterflies and other harmless creatures might frolic in the item's presence.",
      "is Confident: The item helps you feel self assured", "is Covetus: You become obsessed with material wealth",
      "is Fragile: The item crumbles, frays, or cracks slightly when wielded. This quick has no effect on its properties",
      "is Loud: This item makes a loud noise, such as a clang, a shout, or resonating gong when used",
      "is Metamorphic: The item periodicaly alters its appearance in slight ways. You have no control over these minor alterations, which have no effect on the item's use.",
      "is Painful: You experience a harmless flash of pain when using the item", "is Repulsive: You feel a sense of distaste when in contact with the item and continue to experience discomfort while bearing it",
    ];
    
    // Expanded colors
    const colors = [
      { name: "Azure", hex: "#007FFF" },
      { name: "Veridian", hex: "#40826D" },
      { name: "Opal", hex: "#A8CABA" },
      { name: "Garnet", hex: "#800000" },
      { name: "Onyx", hex: "#000000" },
      { name: "Gold", hex: "#FFD700" },
      { name: "Silver", hex: "#C0C0C0" },
      { name: "Bronze", hex: "#CD7F32" },
      { name: "Amethyst", hex: "#9966CC" },
      { name: "Jade", hex: "#00A86B" },
      { name: "Sapphire", hex: "#0F52BA" },
      { name: "Ruby", hex: "#E0115F" }
    ];
    
    // Expanded accent colors
    const accentColors = [
      { name: "Electric Blue", hex: "#7DF9FF" },
      { name: "Neon Green", hex: "#39FF14" },
      { name: "Violet", hex: "#8A2BE2" },
      { name: "Hot Pink", hex: "#FF69B4" },
      { name: "Sunset Orange", hex: "#FF4500" },
      { name: "Lime", hex: "#BFFF00" },
      { name: "Fuchsia", hex: "#FF77FF" }
    ];
    
    // Revised rarity tiers with adjusted spell slots and power
    const rarities = [
      { name: "Uncommon", weight: 40, spellSlots: 1, atWill: 1, enhancement: 1, attunement: false, meleeDamage: "1d4 bludgeoning", maxSpellLevel: 1, wandChargeDice: "1d4+1", maxCharges: 5 },
      { name: "Rare", weight: 30, spellSlots: 2, atWill: 2, enhancement: 2, attunement: true, meleeDamage: "1d4 bludgeoning", maxSpellLevel: 2, wandChargeDice: "1d6+2", maxCharges: 10 },
      { name: "Very Rare", weight: 20, spellSlots: 3, atWill: 2, enhancement: 3, attunement: true, meleeDamage: "1d6 bludgeoning", maxSpellLevel: 3, wandChargeDice: "1d8+3", maxCharges: 15 },
      { name: "Legendary", weight: 10, spellSlots: 4, atWill: 3, enhancement: 4, attunement: true, meleeDamage: "1d6 bludgeoning", maxSpellLevel: 4, wandChargeDice: "1d10+4", maxCharges: 20 }
    ];
    
    // Sentient Item Properties
    const sentientAlignments = ["Lawful Good", "Neutral Good", "Chaotic Good", "Lawful Neutral", "True Neutral", "Chaotic Neutral", "Lawful Evil", "Neutral Evil", "Chaotic Evil"];
    const sentientPersonalities = [
      "Arrogant", "Benevolent", "Cautious", "Chaotic", "Compassionate", "Cowardly", "Cruel", "Curious", "Cynical", "Deceitful", "Devout", "Disciplined", "Envious", "Greedy", "Honest", "Honorable", "Idealistic", "Impulsive", "Independent", "Jealous", "Jovial", "Lazy", "Loyal", "Malicious", "Mischievous", "Modest", "Optimistic", "Pessimistic", "Pious", "Playful", "Practical", "Proud", "Rebellious", "Reckless", "Reserved", "Sarcastic", "Secretive", "Selfish", "Stoic", "Stubborn", "Suspicious", "Tactful", "Timid", "Vain", "Vengeful", "Wise", "Witty"
    ];
    const sentientSenses = [
      "Hearing and standard vision out to 30 feet",
      "Hearing and standard vision out to 60 feet",
      "Hearing and standard vision out to 120 feet",
      "Hearing and Darkvision out to 120 feet"
    ];
    const sentientPurposes = [
      "Aligned. The item seeks to defeat or destroy those of a diametrically opposed alignment. Such an item is never Neutral",
      "Bane. The item seeks to thwart or destroy creatures of a particular type, such as Constructs, fiends, or Undead",
      "Creator Seeker. The item seeks its creator and wants to understand why it was created",
      "Destiny Seeker. The item believes it and its bearer have key roles to play in future events.",
      "Destroyer. The item craves destruction and goads its user to fight arbitrarily.",
      "Glory Seeker. The item seeks renown as the greatest magic item in the world by winning fame or notoriety for its user.",
      "Lore Seeker. The item craves knowledge or is determined to solve a mystery, learn a secret, or unravel a cryptic prophecy",
      "Protector. The item seeks to defend a particular kind of creature, such as elves or werewolves.",
      "Soulmate Seeker. The item seeks another sentient magic item, perhaps one that is similar to itself.",
      "Templar. The item seeks to defend the servants and interests of a particular deity."
    ];
    
     const staffDesigns = [
      "a simple, unadorned shaft",
      "a polished jewel at the top",
      "a glowing orb at the top",
      "a skull at the top",
      "intricate carvings along the shaft",
      "a leather-wrapped grip",
      "a metal ferrule at the base",
      "a series of small bells along the shaft",
      "a cluster of feathers at the top",
      "a winding vine pattern",
      "a smooth, polished surface",
      "a rough, bark-like texture",
      "a spiral design along the shaft",
      "a series of runes etched into the surface",
      "a small, caged flame at the top",
      "a cluster of crystals at the top",
        "a small, caged creature at the top",
      "a series of small mirrors along the shaft",
      "a small, caged storm at the top",
        "a series of small gears along the shaft",
      "a small, caged star at the top",
         "a series of small faces along the shaft",
       "a small, caged eye at the top",
      "a series of small hands along the shaft",
       "a small, caged heart at the top",
       "a series of small mouths along the shaft",
       "a small, caged brain at the top",
       "a series of small ears along the shaft",
      "a small, caged soul at the top",
        "a series of small noses along the shaft",
        "a small, caged tear at the top",
        "a series of small feet along the shaft",
        "a small, caged laugh at the top",
      "a series of small teeth along the shaft",
     "a small, caged scream at the top",
      "a series of small bones along the shaft",
      "a small, caged whisper at the top",
      "a series of small eyes along the shaft",
        "a small, caged song at the top",
        "a series of small stars along the shaft",
       "a small, caged dream at the top",
      "a series of small moons along the shaft",
        "a small, caged nightmare at the top",
        "a series of small suns along the shaft",
        "a small, caged memory at the top",
         "a series of small clouds along the shaft",
          "a small, caged hope at the top",
          "a series of small raindrops along the shaft",
        "a small, caged fear at the top",
        "a series of small flames along the shaft",
      "a small, caged joy at the top",
     "a series of small ice crystals along the shaft",
     "a small, caged sadness at the top",
      "a series of small lightning bolts along the shaft",
        "a small, caged anger at the top",
      "a series of small waves along the shaft",
       "a small, caged love at the top",
      "a series of small rocks along the shaft",
      "a small, caged hate at the top",
     "a series of small flowers along the shaft",
      "a small, caged peace at the top",
      "a series of small leaves along the shaft",
       "a small, caged war at the top",
     "a series of small thorns along the shaft",
      "a small, caged life at the top",
    "a series of small vines along the shaft",
       "a small, caged death at the top",
      "a series of small roots along the shaft",
    "a small, caged time at the top",
    "a series of small branches along the shaft",
     "a small, caged space at the top",
     "a series of small mushrooms along the shaft",
       "a small, caged reality at the top",
        "a series of small insects along the shaft",
        "a small, caged illusion at the top",
        "a series of small spiders along the shaft",
         "a small, caged truth at the top",
        "a series of small snakes along the shaft",
          "a small, caged lie at the top",
         "a series of small birds along the shaft",
        "a small, caged secret at the top",
    "a series of small fish along the shaft",
         "a small, caged mystery at the top",
          "a series of small frogs along the shaft",
           "a small, caged prophecy at the top",
             "a series of small toads along the shaft",
           "a small, caged destiny at the top",
           "a series of small lizards along the shaft",
           "a small, caged fate at the top",
         "a series of small turtles along the shaft",
          "a small, caged choice at the top",
            "a series of small snails along the shaft",
            "a small, caged path at the top",
              "a series of small slugs along the shaft",
             "a small, caged journey at the top",
            "a series of small worms along the shaft",
           "a small, caged goal at the top",
         "a series of small ants along the shaft",
       "a small, caged desire at the top",
      "a series of small bees along the shaft",
      "a small, caged need at the top",
      "a series of small butterflies along the shaft",
     "a small, caged want at the top",
      "a series of small moths along the shaft",
    "a small, caged wish at the top",
  "a series of small flies along the shaft",
     "a small, caged dream at the top",
      "a series of small gnats along the shaft",
       "a small, caged nightmare at the top",
      "a series of small mosquitoes along the shaft",
      "a small, caged hope at the top",
      "a series of small fleas along the shaft",
      "a small, caged fear at the top",
    "a series of small ticks along the shaft",
    "a small, caged joy at the top",
      "a series of small mites along the shaft",
    "a small, caged sadness at the top",
     "a series of small lice along the shaft",
      "a small, caged anger at the top",
    "a series of small gnats along the shaft",
     "a small, caged love at the top",
     "a series of small wasps along the shaft",
     "a small, caged hate at the top",
    "a series of small hornets along the shaft",
    "a small, caged peace at the top",
     "a series of small beetles along the shaft",
     "a small, caged war at the top",
      "a series of small grasshoppers along the shaft",
      "a small, caged life at the top",
      "a series of small crickets along the shaft",
      "a small, caged death at the top",
        "a series of small cicadas along the shaft",
      "a small, caged time at the top",
    "a series of small ladybugs along the shaft",
    "a small, caged space at the top",
      "a series of small fireflies along the shaft",
     "a small, caged reality at the top",
    "a series of small centipedes along the shaft",
    "a small, caged illusion at the top",
      "a series of small millipedes along the shaft",
     "a small, caged truth at the top",
      "a series of small scorpions along the shaft",
       "a small, caged lie at the top",
        "a series of small tarantulas along the shaft",
         "a small, caged secret at the top",
         "a series of small black widows along the shaft",
     "a small, caged mystery at the top",
      "a series of small brown recluses along the shaft",
      "a small, caged prophecy at the top",
    "a series of small wolf spiders along the shaft",
       "a small, caged destiny at the top",
     "a series of small jumping spiders along the shaft",
    "a small, caged fate at the top",
       "a series of small orb weavers along the shaft",
    "a small, caged choice at the top",
       "a series of small huntsman spiders along the shaft",
      "a small, caged path at the top",
     "a series of small trapdoor spiders along the shaft",
     "a small, caged journey at the top",
        "a series of small funnel web spiders along the shaft",
       "a small, caged goal at the top",
     "a series of small banana spiders along the shaft",
      "a small, caged desire at the top",
        "a series of small camel spiders along the shaft",
        "a small, caged need at the top",
        "a series of small daddy long legs along the shaft",
         "a small, caged want at the top",
         "a series of small harvestmen along the shaft",
    ];
    
    /* --- Utility Functions --- */
    function randomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }
    function randomNumber(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    function rollDice(diceString) {
      const [numDice, dieType, modifier] = diceString.match(/(\d+)d(\d+)([+-]\d+)?/).slice(1);
      let total = 0;
      for (let i = 0; i < parseInt(numDice); i++) {
        total += randomNumber(1, parseInt(dieType));
      }
      return modifier ? total + parseInt(modifier) : total;
    }
    
    // Select rarity based on weighted chanceâ€”unless specified by the user.
    function selectRarity(userChoice) {
      if (userChoice !== "Any") {
        return rarities.find(r => r.name === userChoice) || rarities[0];
      }
      const totalWeight = rarities.reduce((sum, rarity) => sum + rarity.weight, 0);
      let rand = Math.random() * totalWeight;
      for (let rarity of rarities) {
        if (rand < rarity.weight) return rarity;
        rand -= rarity.weight;
      }
      return rarities[0];
    }
    
    // Choose an appropriate icon for the artifact type.
    function selectArtifactIcon(artifactType) {
      return artifactIcons[artifactType] || defaultIcon;
    }
    
    /* --- Populate Select Options --- */
    const artifactTypeSelect = document.getElementById("artifactTypeSelect");
    artifactTypes.forEach(type => {
      const option = document.createElement("option");
      option.value = type;
      option.textContent = type;
      artifactTypeSelect.appendChild(option);
    });
    
    /* --- Main Generation Function --- */
    function generateArtifact() {
      // Check if the user selected a specific artifact type or rarity.
      const selectedArtifactType = document.getElementById("artifactTypeSelect").value;
      const selectedRarity = document.getElementById("raritySelect").value;
      
      const adjective = randomItem(adjectives);
      const artifactType = (selectedArtifactType === "Any") 
                           ? randomItem(artifactTypes) 
                           : selectedArtifactType;
      const material = randomItem(materials);
      const mainColor = randomItem(colors);
      const accentColor = randomItem(accentColors);
      const rarity = selectRarity(selectedRarity);
      
      // Basic artifact stats.
      const weight = randomNumber(1, 5) + " lbs";
      const meleeDamage = rarity.meleeDamage;
        let maxCharges = 0;
     if (artifactType === "Wand" || artifactType === "Staff") {
        maxCharges = rollDice(rarity.wandChargeDice);
      }
      
      // Build the spell list.
      let spellInfo = "";
      let atWillInfo = "";
      let enhancementInfo = "";
      let sentientInfo = "";
      let staffDesignInfo = "";
      let chargeInfo = "";
      
      if (rarity.spellSlots > 0) {
        let spellList = [];
        for (let i = 0; i < rarity.spellSlots; i++) {
          const school = randomItem(Object.keys(spellLists));
          let spell;
          do {
            spell = randomItem(spellLists[school]);
          } while (spellLists[school].indexOf(spell) > rarity.maxSpellLevel - 1);
          
          let charges = null;
          if (artifactType === "Wand" || artifactType === "Staff") {
             charges = randomNumber(1,Math.min(3, maxCharges));
           
           
          }
    
          spellList.push(`${spell} (${school})${charges !== null ? `<span class='spell-charges'> (Charges: ${charges})</span>` : ''}`);
        }
        spellInfo = `<div class="artifact-section"><p><i class="fas fa-scroll icon"></i><strong>Spells:</strong> ${spellList.join("</p><p><i class='fas fa-scroll icon'></i><strong>Spells:</strong> ")}</p></div>`;
      }
      
      if (rarity.atWill > 0) {
        let atWillList = [];
        for (let i = 0; i < rarity.atWill; i++) {
          const school = randomItem(Object.keys(spellLists));
           let spell;
          if (Math.random() < 0.7) {
            do {
              spell = randomItem(spellLists[school]);
            } while (spellLists[school].indexOf(spell) > 0);
            atWillList.push(`${spell} (${school})`);
          } else {
            do {
              spell = randomItem(spellLists[school]);
            } while (spellLists[school].indexOf(spell) > rarity.maxSpellLevel - 1);
            const condition = randomItem(spellConditions);
            atWillList.push(`${spell} (${school}) ${condition}`);
          }
        }
        atWillInfo = `<div class="artifact-section"><p><i class="fas fa-infinity icon"></i><strong>At Will:</strong> ${atWillList.join("</p><p><i class='fas fa-infinity icon'></i><strong>At Will:</strong> ")}</p></div>`;
      }
    
      if (artifactType === "Wand" || artifactType === "Staff") {
        const recharge = Math.random() < 0.5 ? "dawn" : "long rest";
        chargeInfo = `<div class="artifact-section"><p><i class="fas fa-bolt icon"></i><strong>Charges:</strong> ${maxCharges}, recharges at ${recharge}</p>`;
        if (maxCharges === 0 && Math.random() < 0.05) {
          chargeInfo += `<p><i class="fas fa-skull-crossbones icon"></i><strong>Upon reaching 0 charges, roll a d20. On a 1, the ${artifactType} is destroyed into ashes.</strong></p></div>`;
        } else {
          chargeInfo += `</div>`;
        }
      }
      
      let allEnhancements = [...spellEnhancements, ...disadvantages];
      let selectedEnhancements = [];
      let disadvantageCount = 0;
      for (let i = 0; i < rarity.enhancement; i++) {
        let enhancement = randomItem(allEnhancements);
        if (disadvantages.includes(enhancement) && disadvantageCount < 1) {
          disadvantageCount++;
          selectedEnhancements.push(enhancement);
        } else if (!disadvantages.includes(enhancement)) {
            selectedEnhancements.push(enhancement);
        }
      }
      
        enhancementInfo = selectedEnhancements.length > 0
        ? `<div class="artifact-section"><p><i class="fas fa-plus-circle icon"></i><strong class="enhancement-text">Enhancements & Disadvantages:</strong></p>${selectedEnhancements.map(e => {
            const className = spellEnhancements.includes(e) ? "enhancement-text" : "disadvantage-text";
            return `<p class="${className}">${e.name}: ${e.description}</p>`;
          }).join("")}</div>`
        : "";
      
      const attunementInfo = rarity.attunement 
        ? `<div class="artifact-section"><p><i class="fas fa-user-lock icon"></i><strong>Attunement:</strong> Required</p></div>` 
        : `<div class="artifact-section"><p><i class="fas fa-user-check icon"></i><strong>Attunement:</strong> Not needed</p></div>`;
      
      const quirk = randomItem(quirks);
      const artifactIconClass = selectArtifactIcon(artifactType);
      let artifactName = `${adjective} ${material} ${artifactType}`;
      const mainColorMarkup = `<span class="color-box" style="background: ${mainColor.hex};"></span><strong>${mainColor.name}</strong> (${mainColor.hex})`;
      const accentColorMarkup = `<span class="color-box" style="background: ${accentColor.hex};"></span><strong>${accentColor.name}</strong> (${accentColor.hex})`;
      
    
      
      if (artifactType === "Staff") {
        staffDesignInfo = `<div class="artifact-section"><p><i class="fas fa-wand-sparkles icon"></i><strong>Staff Design:</strong> ${randomItem(staffDesigns)}</p></div>`;
      }
      
      let sentient = Math.random() < 0.2;
      if (sentient) {
        artifactName = `Sentient ${artifactName}`;
        const personality = randomItem(sentientPersonalities);
        const alignment = randomItem(sentientAlignments);
        const senses = randomItem(sentientSenses);
        const purpose = randomItem(sentientPurposes);
        sentientInfo = `
          <div class="artifact-section">
            <p><i class="fas fa-brain icon"></i><strong>Personality:</strong> ${personality}</p>
            <p><i class="fas fa-balance-scale icon"></i><strong>Alignment:</strong> ${alignment}</p>
            <p><i class="fas fa-eye icon"></i><strong>Senses:</strong> ${senses}</p>
            <p><i class="fas fa-bullseye icon"></i><strong>Special Purpose:</strong> ${purpose}</p>
          </div>
        `;
      }
      
      const description = `
        <div class="artifact-section">
          <h2><i class="fas ${artifactIconClass} icon"></i>${artifactName}</h2>
          <p><i class="fas fa-star icon"></i><strong>Rarity:</strong> ${rarity.name}</p>
          <p><i class="fas fa-weight icon"></i><strong>Weight:</strong> ${weight}</p>
          <p><i class="fas fa-gavel icon"></i><strong>Melee Damage:</strong> ${meleeDamage}</p>
          <p><i class="fas fa-palette icon"></i><strong>Main Color:</strong> ${mainColorMarkup}</p>
          <p><i class="fas fa-brush icon"></i><strong>Accent Color:</strong> ${accentColorMarkup}</p>
        </div>
        
          ${spellInfo}
           ${atWillInfo}
           ${chargeInfo}
          
           ${staffDesignInfo}
       
        
          ${enhancementInfo}
        
          ${sentientInfo}
          ${attunementInfo}
        <div class="artifact-section">
          <p><i class="fas fa-info-circle icon"></i><em>This artifact ${quirk}.</em></p>
        </div>
      `;
      
      document.getElementById("artifactDisplay").innerHTML = description;
    }
    
    // Copy artifact details to clipboard (plain text).
    function copyWeaponDetails() {
      const weaponText = document.getElementById("artifactDisplay").innerText;
      navigator.clipboard.writeText(weaponText)
        .then(() => showToast("Weapon details copied to clipboard!"))
        .catch(err => showToast("Failed to copy: " + err));
    }
    
    function showToast(message) {
      const toastContainer = document.getElementById("toastContainer");
      const toast = document.createElement("div");
      toast.classList.add("toast");
      toast.textContent = message;
      toastContainer.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add("show");
        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => {
            toastContainer.removeChild(toast);
          }, 300);
        }, 3000);
      }, 10);
    }
    
    // Event listeners for Generate & Copy buttons.
    document.getElementById("generateBtn").addEventListener("click", generateArtifact);
    document.getElementById("copyBtn").addEventListener("click", copyWeaponDetails);
  </script>
</body>
</html>
